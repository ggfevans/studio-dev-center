"use strict";(globalThis.webpackChunkvertigis_studio_dev_center=globalThis.webpackChunkvertigis_studio_dev_center||[]).push([[8281],{3905:(t,e,i)=>{i.d(e,{Zo:()=>u,kt:()=>f});var r=i(7294);function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function l(t,e){if(null==t)return{};var i,r,n=function(t,e){if(null==t)return{};var i,r,n={},o=Object.keys(t);for(r=0;r<o.length;r++)i=o[r],e.indexOf(i)>=0||(n[i]=t[i]);return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)i=o[r],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var c=r.createContext({}),s=function(t){var e=r.useContext(c),i=e;return t&&(i="function"==typeof t?t(e):a(a({},e),t)),i},u=function(t){var e=s(t.components);return r.createElement(c.Provider,{value:e},t.children)},p="mdxType",d={inlineCode:"code",wrapper:function(t){var e=t.children;return r.createElement(r.Fragment,{},e)}},m=r.forwardRef((function(t,e){var i=t.components,n=t.mdxType,o=t.originalType,c=t.parentName,u=l(t,["components","mdxType","originalType","parentName"]),p=s(i),m=n,f=p["".concat(c,".").concat(m)]||p[m]||d[m]||o;return i?r.createElement(f,a(a({ref:e},u),{},{components:i})):r.createElement(f,a({ref:e},u))}));function f(t,e){var i=arguments,n=e&&e.mdxType;if("string"==typeof t||n){var o=i.length,a=new Array(o);a[0]=m;var l={};for(var c in e)hasOwnProperty.call(e,c)&&(l[c]=e[c]);l.originalType=t,l[p]="string"==typeof t?t:n,a[1]=l;for(var s=2;s<o;s++)a[s]=i[s];return r.createElement.apply(null,a)}return r.createElement.apply(null,i)}m.displayName="MDXCreateElement"},9088:(t,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var r=i(7462),n=(i(7294),i(3905));const o={title:"Registering .NET Activities with VertiGIS Studio Workflow Designer",description:"VertiGIS Studio Workflow - Registering .NET workflow activities with VertiGIS Studio Workflow Designer"},a=void 0,l={unversionedId:"workflow/sdk-net-register-activities",id:"workflow/sdk-net-register-activities",title:"Registering .NET Activities with VertiGIS Studio Workflow Designer",description:"VertiGIS Studio Workflow - Registering .NET workflow activities with VertiGIS Studio Workflow Designer",source:"@site/docs/workflow/sdk-net-register-activities.mdx",sourceDirName:"workflow",slug:"/workflow/sdk-net-register-activities",permalink:"/docs/workflow/sdk-net-register-activities",draft:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/workflow/sdk-net-register-activities.mdx",tags:[],version:"current",frontMatter:{title:"Registering .NET Activities with VertiGIS Studio Workflow Designer",description:"VertiGIS Studio Workflow - Registering .NET workflow activities with VertiGIS Studio Workflow Designer"},sidebar:"workflow",previous:{title:"SDK Overview",permalink:"/docs/workflow/sdk-net-overview"},next:{title:"Integrating the ArcGIS Runtime SDK for .NET",permalink:"/docs/workflow/sdk-net-integrating-the-arcgis-api"}},c={},s=[{value:"Implement a TypeScript Activity Pack with Stub Activities",id:"implement-a-typescript-activity-pack-with-stub-activities",level:2},{value:"Create a new Activity Pack",id:"create-a-new-activity-pack",level:3},{value:"Stub out the Activity Metadata",id:"stub-out-the-activity-metadata",level:3}],u={toc:s},p="wrapper";function d(t){let{components:e,...i}=t;return(0,n.kt)(p,(0,r.Z)({},u,i,{components:e,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"VertiGIS Studio Workflow ",(0,n.kt)("a",{parentName:"p",href:"/docs/workflow/key-concepts#activities"},"activities")," can be implemented in either TypeScript or C#, depending on the target platform. For ",(0,n.kt)("a",{parentName:"p",href:"/docs/workflow/tutorial-web-calculate-logarithm-activity"},"custom activities implemented in TypeScript"),", the registration of the workflow activity implementation is done alongside the VertiGIS Studio Workflow Designer activity definition when the ",(0,n.kt)("a",{parentName:"p",href:"/docs/workflow/key-concepts#activity-packs"},"activity pack")," is registered. However, with .NET activities implemented for VertiGIS Studio Mobile or ",(0,n.kt)("a",{parentName:"p",href:"https://docs.vertigisstudio.com/workflow/latest/help/Default.htm#wf5/help/server-workflows.htm%3FTocPath%3DServer%2520Workflows%7C_____0"},"VertiGIS Studio Workflow Server"),", the implementation is defined on the host platform (.NET), while the VertiGIS Studio Workflow Designer activity definition must be defined in an activity pack (TypeScript)."),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"},"If no VertiGIS Studio Workflow Designer activity definition is provided for a custom activity implemented for VertiGIS Studio Mobile or VertiGIS Studio Workflow Server, the activity will not show up in VertiGIS Studio Workflow Designer and must be run using ",(0,n.kt)("a",{parentName:"p",href:"https://docs.vertigisstudio.com/workflow/latest/help/Default.htm#wf5/help/activities/run-activity.htm%3FTocPath%3DActivities%7CActivity%2520Reference%7C_____167"},(0,n.kt)("inlineCode",{parentName:"a"},"RunActivity")),".")),(0,n.kt)("p",null,"This article covers how to create an activity pack to register VertiGIS Studio Workflow Designer activity definitions for custom activities implemented in ",(0,n.kt)("a",{parentName:"p",href:"/docs/workflow/tutorial-mobile-calculate-logarithm-activity"},"VertiGIS Studio Mobile")," or ",(0,n.kt)("a",{parentName:"p",href:"/docs/workflow/tutorial-server-calculate-logarithm-activity"},"VertiGIS Studio Workflow Server"),"."),(0,n.kt)("h2",{id:"implement-a-typescript-activity-pack-with-stub-activities"},"Implement a TypeScript Activity Pack with Stub Activities"),(0,n.kt)("p",null,"The idea behind creating activity definitions for VertiGIS Studio Workflow Designer is that every activity implemented in .NET has a corresponding stub activity with the metadata, but no execution body, in a TypeScript activity pack."),(0,n.kt)("p",null,"Let's take the VertiGIS Studio Mobile ",(0,n.kt)("a",{parentName:"p",href:"/docs/workflow/tutorial-mobile-calculate-logarithm-activity"},"custom logarithm activity")," for example."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-cs",metastring:'title="App1/App1/CustomActivity.cs"',title:'"App1/App1/CustomActivity.cs"'},'using VertiGIS.Workflow.Runtime;\nusing System;\nusing System.Collections.Generic;\nusing System.Threading.Tasks;\n\nnamespace App1.Workflow\n{\n    public class CalculateLog : IActivityHandler\n    {\n        public const string Action = "uuid:<uuid>::CalculateLog";\n\n        public Task<IDictionary<string, object>> Execute(IDictionary<string, object> inputs, IActivityContext context)\n        {\n            double? logBase = null;\n            if (inputs.ContainsKey("base")) {\n                var logBase = inputs["base"];\n            }\n            var value = (double)inputs["value"];\n\n            double logResult;\n            if(logBase != null)\n            {\n                logResult = Math.Log(value, (double)logBase);\n            } else\n            {\n                logResult = Math.Log(value);\n            }\n\n            return Task.FromResult((IDictionary<string, object>)new Dictionary<string, object>()\n            {\n                ["result"] = logResult\n            });\n        }\n    }\n}\n')),(0,n.kt)("p",null,"This activity will need a TypeScript stub that defines its input and output types and descriptions, specifies the runtime environments it supports, and an activity description."),(0,n.kt)("h3",{id:"create-a-new-activity-pack"},"Create a new Activity Pack"),(0,n.kt)("p",null,"Follow the instructions in ",(0,n.kt)("a",{parentName:"p",href:"/docs/workflow/tutorial-web-calculate-logarithm-activity"},"Implement a Custom Activity for Web Applications")," up to ",(0,n.kt)("a",{parentName:"p",href:"/docs/workflow/tutorial-web-calculate-logarithm-activity#implement-the-activity"},"Implement the Activity"),". You will need to update the uuid value in ",(0,n.kt)("inlineCode",{parentName:"p"},"uuid.js")," of your activity pack to match the uuid of your .NET project."),(0,n.kt)("h3",{id:"stub-out-the-activity-metadata"},"Stub out the Activity Metadata"),(0,n.kt)("p",null,"Stub out the appropriate metadata and type information for the .NET activity you are stubbing out. The execute body is left empty, as the implementation is defined in .NET using the VertiGIS Studio Mobile SDK or VertiGIS Studio Workflow for Server. In the case of the Logarithm activity, the stub might look like this."),(0,n.kt)("admonition",{title:"Important",type:"info"},(0,n.kt)("p",{parentName:"admonition"},"By default the static ",(0,n.kt)("inlineCode",{parentName:"p"},"action")," property will be generated for you when you build the TypeScript activity pack. In the example below we've explicitly declared the static ",(0,n.kt)("inlineCode",{parentName:"p"},"action")," property to match the action name in the .NET implementation. If these two action names are not the same, the .NET workflow runtime will ",(0,n.kt)("strong",{parentName:"p"},"not")," be able to find the correct activity.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ts"},'import type { IActivityHandler } from "@vertigis/workflow/IActivityHandler";\n\nexport interface CalculateLogInputs {\n    /**\n     * @description The base of the logarithm. Defaults to the natural log.\n     */\n    base?: number;\n\n    /**\n     * @description The number to calculate the logarithm for.\n     * @required\n     */\n    value: number;\n}\n\nexport interface CalculateLogOutputs {\n    /**\n     * @description The logarithm output.\n     */\n    result: number;\n}\n\n/**\n * @supportedApps GMV\n * @category Custom Activities\n * @description An activity that calculates the log of a number with the given base.\n */\nexport class CalculateLog implements IActivityHandler {\n    static action = "uuid:<uuid>::CalculateLog";\n\n    async execute(\n        inputs: CalculateLogInputs\n    ): Promise<CalculateLogOutputs> {\n        // The host application must implement this activity\n        throw new Error(\n            "Activity not implemented for this platform."\n        );\n    }\n}\n')),(0,n.kt)("p",null,"The activity now has a friendly user interface in VertiGIS Studio Workflow Designer, that can be ",(0,n.kt)("a",{parentName:"p",href:"/docs/workflow/sdk-web-overview#sharing-the-activity-pack"},"shared with other workflow authors"),"."))}d.isMDXComponent=!0}}]);