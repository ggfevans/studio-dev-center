"use strict";(globalThis.webpackChunkvertigis_studio_dev_center=globalThis.webpackChunkvertigis_studio_dev_center||[]).push([[1388],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>h});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},m=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),c=p(n),u=a,h=c["".concat(s,".").concat(u)]||c[u]||d[u]||i;return n?o.createElement(h,r(r({ref:t},m),{},{components:n})):o.createElement(h,r({ref:t},m))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:a,r[1]=l;for(var p=2;p<i;p++)r[p]=n[p];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(7294),a=n(6010);const i={tabItem:"tabItem_Ymn6"};function r(e){let{children:t,hidden:n,className:r}=e;return o.createElement("div",{role:"tabpanel",className:(0,a.Z)(i.tabItem,r),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>C});var o=n(7462),a=n(7294),i=n(6010),r=n(2466),l=n(6550),s=n(1980),p=n(7392),m=n(12);function c(e){return function(e){return a.Children.map(e,(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:o,default:a}}=e;return{value:t,label:n,attributes:o,default:a}}))}function d(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=t??c(n);return function(e){const t=(0,p.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function u(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:n}=e;const o=(0,l.k6)(),i=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,s._X)(i),(0,a.useCallback)((e=>{if(!i)return;const t=new URLSearchParams(o.location.search);t.set(i,e),o.replace({...o.location,search:t.toString()})}),[i,o])]}function f(e){const{defaultValue:t,queryString:n=!1,groupId:o}=e,i=d(e),[r,l]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!u({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const o=n.find((e=>e.default))??n[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:t,tabValues:i}))),[s,p]=h({queryString:n,groupId:o}),[c,f]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[o,i]=(0,m.Nk)(n);return[o,(0,a.useCallback)((e=>{n&&i.set(e)}),[n,i])]}({groupId:o}),g=(()=>{const e=s??c;return u({value:e,tabValues:i})?e:null})();(0,a.useLayoutEffect)((()=>{g&&l(g)}),[g]);return{selectedValue:r,selectValue:(0,a.useCallback)((e=>{if(!u({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),p(e),f(e)}),[p,f,i]),tabValues:i}}var g=n(2389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function y(e){let{className:t,block:n,selectedValue:l,selectValue:s,tabValues:p}=e;const m=[],{blockElementScrollPositionUntilNextRender:c}=(0,r.o5)(),d=e=>{const t=e.currentTarget,n=m.indexOf(t),o=p[n].value;o!==l&&(c(t),s(o))},u=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=m.indexOf(e.currentTarget)+1;t=m[n]??m[0];break}case"ArrowLeft":{const n=m.indexOf(e.currentTarget)-1;t=m[n]??m[m.length-1];break}}t?.focus()};return a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":n},t)},p.map((e=>{let{value:t,label:n,attributes:r}=e;return a.createElement("li",(0,o.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:e=>m.push(e),onKeyDown:u,onClick:d},r,{className:(0,i.Z)("tabs__item",b.tabItem,r?.className,{"tabs__item--active":l===t})}),n??t)})))}function k(e){let{lazy:t,children:n,selectedValue:o}=e;const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=i.find((e=>e.props.value===o));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return a.createElement("div",{className:"margin-top--md"},i.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==o}))))}function v(e){const t=f(e);return a.createElement("div",{className:(0,i.Z)("tabs-container",b.tabList)},a.createElement(y,(0,o.Z)({},e,t)),a.createElement(k,(0,o.Z)({},e,t)))}function C(e){const t=(0,g.Z)();return a.createElement(v,(0,o.Z)({key:String(t)},e))}},5858:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(9960),a=n(7294),i=n(6010);const r={root:"root_Uwqo"};function l(e){let{title:t,description:n,link:l}=e;return a.createElement("div",{className:(0,i.Z)("card-demo",r.root)},a.createElement("div",{className:"card"},a.createElement("div",{className:"card__header"},a.createElement("h3",null,t)),a.createElement("div",{className:"card__body"},a.createElement("p",null,n)),a.createElement("div",{className:"card__footer"},a.createElement(o.Z,{className:"button button--secondary button--block",to:l},"Get Started"))))}},7467:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(7294);const a={root:"root_vxd5"};function i(e){let{children:t}=e;return o.createElement("div",{className:a.root},t)}},8803:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>b,frontMatter:()=>m,metadata:()=>d,toc:()=>h});var o=n(7462),a=(n(7294),n(3905)),i=n(4996),r=n(5858),l=n(7467),s=n(4866),p=n(5162);const m={title:"Component Reference",description:"VertiGIS Studio Web - Reference for custom components in VertiGIS Studio Web"},c=void 0,d={unversionedId:"web/sdk-components-reference",id:"web/sdk-components-reference",title:"Component Reference",description:"VertiGIS Studio Web - Reference for custom components in VertiGIS Studio Web",source:"@site/docs/web/sdk-components-reference.mdx",sourceDirName:"web",slug:"/web/sdk-components-reference",permalink:"/docs/web/sdk-components-reference",draft:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/web/sdk-components-reference.mdx",tags:[],version:"current",frontMatter:{title:"Component Reference",description:"VertiGIS Studio Web - Reference for custom components in VertiGIS Studio Web"},sidebar:"web",previous:{title:"Create a Component",permalink:"/docs/web/sdk-components-create"},next:{title:"Component Hooks",permalink:"/docs/web/sdk-components-hooks"}},u={},h=[{value:"Component Registration",id:"component-registration",level:2},{value:"Components and Layout",id:"components-and-layout",level:2},{value:"Component Anatomy",id:"component-anatomy",level:2},{value:"Rendering",id:"rendering",level:3},{value:"Props",id:"props",level:3},{value:"State",id:"state",level:3},{value:"Models",id:"models",level:2},{value:"Configuration",id:"configuration",level:3},{value:"Component Defaults",id:"component-defaults",level:3},{value:"Initialization and Teardown",id:"initialization-and-teardown",level:3},{value:"Component Lifecycle",id:"component-lifecycle",level:2},{value:"Activation and Deactivation",id:"activation-and-deactivation",level:3},{value:"Next Steps",id:"next-steps",level:2}],f={toc:h},g="wrapper";function b(e){let{components:t,...n}=e;return(0,a.kt)(g,(0,o.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"The following is an example of a custom component that has been created using the VertiGIS Studio Web SDK. In general, VertiGIS Studio Web components are functional React components extended with a few new behaviors and patterns."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'import React, { useState } from "react";\nimport {\n    LayoutElement,\n    LayoutElementProperties,\n} from "@vertigis/web/components";\nimport List from "@vertigis/web/ui/List";\nimport ListItem from "@vertigis/web/ui/ListItem";\nimport TitleBar from "@vertigis/web/ui/TitleBar";\nimport Button from "@vertigis/web/ui/Button";\nimport { useWatchAndRerender } from "@vertigis/web/ui";\nimport DialogActions from "@vertigis/web/ui/DialogActions";\nimport ExampleComponentModel from "./ExampleComponentModel";\n\nexport default function ExampleComponent(\n    props: LayoutElementProperties<ExampleComponentModel>\n) {\n    const { model } = props;\n    const [hidden, setHidden] = useState(false);\n\n    useWatchAndRerender(model, "items");\n\n    return (\n        <LayoutElement {...props}>\n            <List>\n                <DialogActions key="dialog-actions">\n                    <TitleBar text="Some Title"></TitleBar>\n                    {hidden && (\n                        <Button onClick={() => setHidden(false)}>\n                            Show Component\n                        </Button>\n                    )}\n                    {!hidden && (\n                        <Button onClick={() => setHidden(true)}>\n                            Hide Component\n                        </Button>\n                    )}\n                </DialogActions>\n                {!hidden &&\n                    model.items\n                        .map((item, idx) => (\n                            <ListItem key={idx}>{item}</ListItem>\n                        ))\n                        .toArray()}\n            </List>\n        </LayoutElement>\n    );\n}\n')),(0,a.kt)("h2",{id:"component-registration"},"Component Registration"),(0,a.kt)("p",null,"All components need to be registered with the VertiGIS Studio Web API in order to be used in a layout."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},'export default function (registry: LibraryRegistry) {\n    // ... other item registrations\n\n    registry.registerComponent({\n        // The name used to identify the component in the layout\n        name: "example",\n        // The namespace used to identify the component in the layout.\n        namespace: "custom.abc123",\n        // The class corresponding to the React Functional Component\n        getComponentType: () => ExampleComponent,\n        // The model type this component is bound to.\n        itemType: "example-model",\n        title: "Example Component",\n    });\n')),(0,a.kt)("h2",{id:"components-and-layout"},"Components and Layout"),(0,a.kt)("p",null,"Once a component has been registered, it can be used in a layout by referring it by name and namespace."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<layout xmlns="https://geocortex.com/layout/v1" xmlns:custom="custom.abc123">\n    <custom:example/>\n</layout>\n')),(0,a.kt)("h2",{id:"component-anatomy"},"Component Anatomy"),(0,a.kt)("p",null,"At its core, each custom component is a React component that takes in props and renders a DOM element. However, custom components can implement a couple of patterns which are specific to VertiGIS Studio Web."),(0,a.kt)("h3",{id:"rendering"},"Rendering"),(0,a.kt)("p",null,"VertiGIS Studio Web custom components return a DOM element, like any other React component, but with one restriction. The root DOM element must be a ",(0,a.kt)("inlineCode",{parentName:"p"},"<LayoutElement/>")," node with all the layout attributes passed as props."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"export default function ExampleComponent(\n    props: LayoutElementProperties<ExampleComponentModel>\n) {\n    return (\n        // highlight-next-line\n        <LayoutElement {...props}>\n            <p>Some Content</p>\n        </LayoutElement>\n    );\n}\n")),(0,a.kt)("h3",{id:"props"},"Props"),(0,a.kt)("p",null,"Custom components take in a special type of props, ",(0,a.kt)("inlineCode",{parentName:"p"},"LayoutElementProperties"),". These props include the React props but also include props specific to the SDK, such as;"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The model associated with the component,"),(0,a.kt)("li",{parentName:"ul"},"The ID of the component in the layout"),(0,a.kt)("li",{parentName:"ul"},"The width and height, along with other ",(0,a.kt)("a",{parentName:"li",href:"/docs/web/configuration-layout-reference#presentation-attributes"},"presentation attributes")," in the layout")),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"LayoutElementProperties")," interface takes in ",(0,a.kt)("inlineCode",{parentName:"p"},"ComponentModelBase")," type class corresponding to the model associated with the component. This will give the ",(0,a.kt)("inlineCode",{parentName:"p"},"props.model")," property the correct type."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"export default function ExampleComponent(\n    props: LayoutElementProperties<ExampleComponentModel>\n) {\n    // highlight-next-line\n    const { model, id, width, height, slot, stretch } = props;\n    ...\n}\n")),(0,a.kt)("h3",{id:"state"},"State"),(0,a.kt)("p",null,"VertiGIS Studio Web uses two patterns to manage state in a component. First, any purely local UI or presentation logic state should be captured using the ",(0,a.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/hooks-state.html"},"React state hook")," pattern. For data that comes from configuration or other sources, like a service, the components model should be treated as the state."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'export default function ExampleComponent(\n    props: LayoutElementProperties<ExampleComponentModel>\n) {\n    // highlight-start\n    // Presentation logic state\n    const [hidden, setHidden] = useState(false);\n    // Business Data / Objects\n    useWatchAndRerender(props.model, "modelProperty")\n    // highlight-end\n    ...\n}\n')),(0,a.kt)("h2",{id:"models"},"Models"),(0,a.kt)("p",null,"Every component is bound to specific ",(0,a.kt)("a",{parentName:"p",href:"/docs/web/configuration-app-config-getting-started#anatomy-of-an-app-config"},(0,a.kt)("strong",{parentName:"a"},"item type")),", and each item type is bound to a specific model.\nIn this snippet, the ",(0,a.kt)("inlineCode",{parentName:"p"},"ExampleComponent")," is bound to the ",(0,a.kt)("inlineCode",{parentName:"p"},"example-model")," item type. The ",(0,a.kt)("inlineCode",{parentName:"p"},"ExampleComponentModel")," is registered as the ",(0,a.kt)("inlineCode",{parentName:"p"},"example-model")," item type, meaning that an ",(0,a.kt)("inlineCode",{parentName:"p"},"ExampleComponentModel")," will be injected into the props of each ",(0,a.kt)("inlineCode",{parentName:"p"},"ExampleComponent"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},'export default function (registry: LibraryRegistry) {\n    // ... other item registrations\n\n    registry.registerComponent({\n        name: "example",\n        namespace: LAYOUT_NAMESPACE,\n        getComponentType: () => ExampleComponent,\n        // highlight-next-line\n        itemType: "example-model",\n        title: "Example Component",\n    });\n    registry.registerModel({\n        getModel: (config) => new ExampleComponentModel(config),\n        // highlight-next-line\n        itemType: "example-model",\n    });\n}\n')),(0,a.kt)("p",null,"It's best practice to use the model to define configurable or persistent state, and use the ",(0,a.kt)("a",{parentName:"p",href:"/docs/web/sdk-components-hooks"},"component hooks")," to interact with the model. For UI specific transient state, like an active selection, it is recommended you use the ",(0,a.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/hooks-state.html"},"React state hooks"),"."),(0,a.kt)("p",null,"For example, the following component delegates the management of the list item content to its model. The component does not have to concern itself with whether those list items come from config, dynamic application events, or other sources."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"This example uses the ",(0,a.kt)("inlineCode",{parentName:"p"},"useWatchAndRerender")," ",(0,a.kt)("a",{parentName:"p",href:"/docs/web/sdk-components-hooks"},"component hook")," in order to dynamically update the component when the model changes.")),(0,a.kt)(s.Z,{defaultValue:"component",values:[{label:"Component",value:"component"},{label:"Model",value:"model"}],mdxType:"Tabs"},(0,a.kt)(p.Z,{value:"component",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'export default function ExampleComponent(\n    props: LayoutElementProperties<ExampleComponentModel>\n) {\n    const { model } = props;\n\n    useWatchAndRerender(model, "items");\n\n    return (\n        <LayoutElement {...props}>\n            <List>\n                {model.items\n                    .map((item, idx) => (\n                        <ListItem key={idx}>{item}</ListItem>\n                    ))\n                    .toArray()}\n            </List>\n        </LayoutElement>\n    );\n}\n'))),(0,a.kt)(p.Z,{value:"model",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"export default class ExampleComponentModel extends ComponentModelBase {\n    items: Collection<string> = new Collection<string>();\n\n    // ... populate the items list somehow\n}\n")))),(0,a.kt)("h3",{id:"configuration"},"Configuration"),(0,a.kt)("p",null,"VertiGIS Studio Web provides a suite of flexible, highly configurable components, and this flexibility is powered in a large part by the relationship between app config, models, and components. Each model has the potential to consume static app config, which it can deserialize and transform before providing the data to its associated component for rendering."),(0,a.kt)("p",null,"The following model defines a simple configurable property ",(0,a.kt)("inlineCode",{parentName:"p"},"items"),"."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The shape of this property in the ",(0,a.kt)("strong",{parentName:"li"},"app config JSON file")," is defined by the ",(0,a.kt)("inlineCode",{parentName:"li"},"items")," property in the ",(0,a.kt)("inlineCode",{parentName:"li"},"ExampleComponentModelProperties")," interface."),(0,a.kt)("li",{parentName:"ul"},"The shape of this property in the ",(0,a.kt)("strong",{parentName:"li"},"model")," is defined by the ",(0,a.kt)("inlineCode",{parentName:"li"},"items")," property in the ",(0,a.kt)("inlineCode",{parentName:"li"},"ExampleComponentModel")," class.")),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"ExampleComponentModel")," class consumes the configuration by extending the ",(0,a.kt)("inlineCode",{parentName:"p"},"ComponentModelBase<ExampleComponentProperties>")," interface, using the ",(0,a.kt)("inlineCode",{parentName:"p"},"@serializable")," class decorator, and then defining serialization logic in an override of the ",(0,a.kt)("inlineCode",{parentName:"p"},"_getSerializableProperties()")," method. You can learn more about app config serialization in ",(0,a.kt)("a",{parentName:"p",href:"/docs/web/sdk-serializable-properties"},"this article"),"."),(0,a.kt)(s.Z,{defaultValue:"model",values:[{label:"Model",value:"model"},{label:"App Config",value:"config"}],mdxType:"Tabs"},(0,a.kt)(p.Z,{value:"model",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},'interface ExampleComponentModelProperties\n    extends ComponentModelProperties {\n    items?: string[];\n}\n\n// highlight-next-line\n@serializable\nexport default class ExampleComponentModel extends ComponentModelBase<ExampleComponentModelProperties> {\n    items: Collection<string> = new Collection<string>();\n\n    protected _getSerializableProperties(): PropertyDefs<ExampleComponentModelProperties> {\n        // highlight-next-line\n        const props = super._getSerializableProperties();\n        return {\n            ...props,\n            items: {\n                serializeModes: ["initial"],\n                default: ["Default Value"],\n                serialize: () => this.items.toArray(),\n                deserialize: (items) => {\n                    this.items.removeAll();\n                    this.items.addMany(items);\n                },\n            },\n        };\n    }\n}\n'))),(0,a.kt)(p.Z,{value:"config",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},' {\n    "schemaVersion": "1.0",\n    "items": [\n        ...\n        {\n            "$type": "example-component",\n            "id" : "example-component",\n            "items" : [\n                "Item 1",\n                "Item 2",\n                "Item 3"\n            ]\n        },\n        ...\n    ]\n}\n')))),(0,a.kt)("h3",{id:"component-defaults"},"Component Defaults"),(0,a.kt)("p",null,"Most components support the ",(0,a.kt)("a",{parentName:"p",href:"/docs/web/configuration-app-config-getting-started#linking-layout-to-app-config"},(0,a.kt)("inlineCode",{parentName:"a"},"config")," attribute")," in the layout, which links a component model to configuration in the app config JSON. However, many component models have default values they can supply for initialization instead of relying on configuration. This means that if you omit the ",(0,a.kt)("inlineCode",{parentName:"p"},"config")," property for certain components, the component model will attempt to create itself with its default values. An example of defining these default values can be seen in ",(0,a.kt)("a",{parentName:"p",href:"/docs/web/sdk-serializable-properties#populating-the-class-with-configuration-values"},"this example"),". It's also the mechanism that powers the default map displayed by this layout."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="utf-8" ?>\n<layout xmlns="https://geocortex.com/layout/v1">\n    <map/> \x3c!-- The map component is populated with values from the MapModel\'s `_getSerializableProperties` function. --\x3e\n</layout>\n')),(0,a.kt)("h3",{id:"initialization-and-teardown"},"Initialization and Teardown"),(0,a.kt)("p",null,"Component models have an initialization method, which can be used to perform asynchronous startup logic, and a teardown method, which can be used to free resources when a component is removed from the layout."),(0,a.kt)("admonition",{title:"Important",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Always call ",(0,a.kt)("inlineCode",{parentName:"p"},"super._onInitialize()")," when overriding the ",(0,a.kt)("inlineCode",{parentName:"p"},"_onInitialize")," method, and ",(0,a.kt)("inlineCode",{parentName:"p"},"super._onDestroy()")," when overriding the ",(0,a.kt)("inlineCode",{parentName:"p"},"_onDestroy")," method.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},'export default class ExampleComponentModel extends ComponentModelBase {\n    items: Collection<string> = new Collection<string>();\n\n    protected async _onInitialize(): Promise<void> {\n        // highlight-next-line\n        super._onInitialize();\n\n        this.items.add("1");\n        this.items.add("2");\n        this.items.add("3");\n        this.items.add("4");\n        // ...other initialization logic\n    }\n\n    protected async _onDestroy(): Promise<void> {\n        await super._onDestroy();\n\n        this.items.destroy();\n        // ...free up resources\n    }\n}\n')),(0,a.kt)("h2",{id:"component-lifecycle"},"Component Lifecycle"),(0,a.kt)("p",null,"When a VertiGIS Studio Web Application boots up, the set of components which are initially active in the layout are created and initialized. ",(0,a.kt)("a",{parentName:"p",href:"/docs/web/configuration-layout-reference#panels"},"Components like the ",(0,a.kt)("inlineCode",{parentName:"a"},"Panel"))," will only activate their first child. All initially inactive components will only be created when they are activated in the layout."),(0,a.kt)("h3",{id:"activation-and-deactivation"},"Activation and Deactivation"),(0,a.kt)("p",null,"Custom code can listen and react to a components activation or deactivation by subscribing to the ",(0,a.kt)("inlineCode",{parentName:"p"},"ui.activated")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"ui.deactivated")," event. The ",(0,a.kt)("a",{parentName:"p",href:"/docs/web/api-commands-operations-events#events"},(0,a.kt)("inlineCode",{parentName:"a"},"ui.*")," events")," contain various events relating to the component lifecycle."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"The ",(0,a.kt)("inlineCode",{parentName:"p"},"UIService")," contains implements the commands ",(0,a.kt)("inlineCode",{parentName:"p"},"ui.activate")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"ui.deactivate")," and exposes methods like ",(0,a.kt)("inlineCode",{parentName:"p"},"getActiveChildComponentIds()")," which can be used to examine and manipulate the activation state of components.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"@serializable\nexport default class ExampleComponentModel extends ComponentModelBase<ExampleComponentModelProperties> {\n    private readonly _handles: IHandle[] = [];\n\n    protected async _onInitialize(): Promise<void> {\n        super._onInitialize();\n        // highlight-start\n        this._handles.push(\n            this.messages.events.ui.activated.subscribe(() => {\n                // ...on activated logic here\n            })\n        );\n\n        this._handles.push(\n            this.messages.events.ui.deactivated.subscribe(() => {\n                // ...on deactivated logic here\n            })\n        );\n        // highlight-end\n    }\n\n    protected async _onDestroy(): Promise<void> {\n        await super._onDestroy();\n        // highlight-start\n        // Make sure to clean up subscriptions when the model is destroyed.\n        this._handles.forEach((h) => h.remove());\n        // highlight-end\n    }\n}\n")),(0,a.kt)("h2",{id:"next-steps"},"Next Steps"),(0,a.kt)(l.Z,{mdxType:"UseCaseContainer"},(0,a.kt)(r.Z,{title:"Learn how to use Commands and Operations with Components",description:"Learn how to run and implement commands and operations with custom components",link:(0,i.Z)("docs/web/sdk-commands-operations"),mdxType:"UseCaseCard"}),(0,a.kt)(r.Z,{title:"Learn about Component Interactions",description:"Learn about how components can interact with each other through their models",link:(0,i.Z)("docs/web/sdk-components-interactions"),mdxType:"UseCaseCard"}),(0,a.kt)(r.Z,{title:"Create a Component with a Complex UI",description:"Follow along with a more in depth component example",link:(0,i.Z)("docs/web/tutorial-implement-component-with-ui"),mdxType:"UseCaseCard"}),(0,a.kt)(r.Z,{title:"Create a Component that Consumes App Config",description:"Learn more about writing components that consume configuration values.",link:(0,i.Z)("docs/web/tutorial-implement-component-participate-app-config"),mdxType:"UseCaseCard"})))}b.isMDXComponent=!0}}]);