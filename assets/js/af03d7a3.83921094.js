"use strict";(globalThis.webpackChunkvertigis_studio_dev_center=globalThis.webpackChunkvertigis_studio_dev_center||[]).push([[9650],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>h});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},m=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),c=p(n),d=a,h=c["".concat(l,".").concat(d)]||c[d]||u[d]||i;return n?o.createElement(h,r(r({ref:t},m),{},{components:n})):o.createElement(h,r({ref:t},m))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:a,r[1]=s;for(var p=2;p<i;p++)r[p]=n[p];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(7294),a=n(6010);const i={tabItem:"tabItem_Ymn6"};function r(e){let{children:t,hidden:n,className:r}=e;return o.createElement("div",{role:"tabpanel",className:(0,a.Z)(i.tabItem,r),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>k});var o=n(7462),a=n(7294),i=n(6010),r=n(2466),s=n(6550),l=n(1980),p=n(7392),m=n(12);function c(e){return function(e){return a.Children.map(e,(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:o,default:a}}=e;return{value:t,label:n,attributes:o,default:a}}))}function u(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=t??c(n);return function(e){const t=(0,p.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function d(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:n}=e;const o=(0,s.k6)(),i=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l._X)(i),(0,a.useCallback)((e=>{if(!i)return;const t=new URLSearchParams(o.location.search);t.set(i,e),o.replace({...o.location,search:t.toString()})}),[i,o])]}function f(e){const{defaultValue:t,queryString:n=!1,groupId:o}=e,i=u(e),[r,s]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const o=n.find((e=>e.default))??n[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:t,tabValues:i}))),[l,p]=h({queryString:n,groupId:o}),[c,f]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[o,i]=(0,m.Nk)(n);return[o,(0,a.useCallback)((e=>{n&&i.set(e)}),[n,i])]}({groupId:o}),v=(()=>{const e=l??c;return d({value:e,tabValues:i})?e:null})();(0,a.useLayoutEffect)((()=>{v&&s(v)}),[v]);return{selectedValue:r,selectValue:(0,a.useCallback)((e=>{if(!d({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);s(e),p(e),f(e)}),[p,f,i]),tabValues:i}}var v=n(2389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function g(e){let{className:t,block:n,selectedValue:s,selectValue:l,tabValues:p}=e;const m=[],{blockElementScrollPositionUntilNextRender:c}=(0,r.o5)(),u=e=>{const t=e.currentTarget,n=m.indexOf(t),o=p[n].value;o!==s&&(c(t),l(o))},d=e=>{let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const n=m.indexOf(e.currentTarget)+1;t=m[n]??m[0];break}case"ArrowLeft":{const n=m.indexOf(e.currentTarget)-1;t=m[n]??m[m.length-1];break}}t?.focus()};return a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":n},t)},p.map((e=>{let{value:t,label:n,attributes:r}=e;return a.createElement("li",(0,o.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:e=>m.push(e),onKeyDown:d,onClick:u},r,{className:(0,i.Z)("tabs__item",b.tabItem,r?.className,{"tabs__item--active":s===t})}),n??t)})))}function y(e){let{lazy:t,children:n,selectedValue:o}=e;const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=i.find((e=>e.props.value===o));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return a.createElement("div",{className:"margin-top--md"},i.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==o}))))}function C(e){const t=f(e);return a.createElement("div",{className:(0,i.Z)("tabs-container",b.tabList)},a.createElement(g,(0,o.Z)({},e,t)),a.createElement(y,(0,o.Z)({},e,t)))}function k(e){const t=(0,v.Z)();return a.createElement(C,(0,o.Z)({key:String(t)},e))}},5858:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(9960),a=n(7294),i=n(6010);const r={root:"root_Uwqo"};function s(e){let{title:t,description:n,link:s}=e;return a.createElement("div",{className:(0,i.Z)("card-demo",r.root)},a.createElement("div",{className:"card"},a.createElement("div",{className:"card__header"},a.createElement("h3",null,t)),a.createElement("div",{className:"card__body"},a.createElement("p",null,n)),a.createElement("div",{className:"card__footer"},a.createElement(o.Z,{className:"button button--secondary button--block",to:s},"Get Started"))))}},7467:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(7294);const a={root:"root_vxd5"};function i(e){let{children:t}=e;return o.createElement("div",{className:a.root},t)}},9697:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>b,frontMatter:()=>m,metadata:()=>u,toc:()=>h});var o=n(7462),a=(n(7294),n(3905)),i=n(4996),r=n(5858),s=n(7467),l=n(4866),p=n(5162);const m={title:"Component Reference",description:"VertiGIS Studio Mobile - Reference for custom components in VertiGIS Studio Mobile"},c=void 0,u={unversionedId:"mobile/sdk-components-reference",id:"mobile/sdk-components-reference",title:"Component Reference",description:"VertiGIS Studio Mobile - Reference for custom components in VertiGIS Studio Mobile",source:"@site/docs/mobile/sdk-components-reference.mdx",sourceDirName:"mobile",slug:"/mobile/sdk-components-reference",permalink:"/docs/mobile/sdk-components-reference",draft:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/mobile/sdk-components-reference.mdx",tags:[],version:"current",frontMatter:{title:"Component Reference",description:"VertiGIS Studio Mobile - Reference for custom components in VertiGIS Studio Mobile"},sidebar:"mobile",previous:{title:"Create a Component",permalink:"/docs/mobile/sdk-components-create"},next:{title:"View Model Helper Class",permalink:"/docs/mobile/sdk-components-viewmodel-helper-class"}},d={},h=[{value:"Component Registration",id:"component-registration",level:2},{value:"Components and Layout",id:"components-and-layout",level:2},{value:"Component Anatomy",id:"component-anatomy",level:2},{value:"Component Class",id:"component-class",level:3},{value:"Component Dependencies",id:"component-dependencies",level:4},{value:"XAML View",id:"xaml-view",level:3},{value:"View Model",id:"view-model",level:3},{value:"Configuration Models",id:"configuration-models",level:2},{value:"Component Defaults",id:"component-defaults",level:3},{value:"Initialization and Teardown",id:"initialization-and-teardown",level:3},{value:"Component Lifecycle",id:"component-lifecycle",level:2},{value:"Activation and Deactivation",id:"activation-and-deactivation",level:3},{value:"Relevant SDK Samples",id:"relevant-sdk-samples",level:2},{value:"Next Steps",id:"next-steps",level:2}],f={toc:h},v="wrapper";function b(e){let{components:t,...n}=e;return(0,a.kt)(v,(0,o.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Did you know VertiGIS Studio Workflow allows you to ",(0,a.kt)("a",{parentName:"p",href:"https://docs.vertigisstudio.com/workflow/latest/help/Default.htm#wf5/help/forms.htm#Overview_of_Forms%3FTocPath%3DForms%7COverview%2520of%2520Forms%7C_____0"},"create custom forms")," you can present to an end user?")),(0,a.kt)("p",null,"Implementing a custom component in VertiGIS Studio Mobile gives you the highest degree of flexibility with what you can do. Components can display custom, dynamic UI, register operation implementations, store persistent data, and more. They are also one of the most complex ways of customizing your mobile app, so it might be worthwhile to review simpler options like ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/configuration-commands-operations"},"Commands and Operations")," or ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/tutorial-change-default-map-click-behavior"},"Workflow")," first."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs"},'[assembly: Component(typeof(CustomComponent), "custom-component", XmlNamespace = XmlNamespaces.App1Namespace)]\nnamespace App1.Components\n{\n    class CustomComponent : ComponentBase\n    {\n        protected override VisualElement Create(XNode node)\n        {\n            return new Label(){ Text = "My Custom Component" };\n        }\n    }\n}\n')),(0,a.kt)("h2",{id:"component-registration"},"Component Registration"),(0,a.kt)("p",null,"VertiGIS Studio Mobile uses\n",(0,a.kt)("a",{parentName:"p",href:"https://autofaccn.readthedocs.io/en/latest/index.html"},"Autofac")," to register,\nlocate, and inject components, services and other classes."),(0,a.kt)("p",null,"Each component class is registered with the ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/sdk-dependency-injection#component"},(0,a.kt)("inlineCode",{parentName:"a"},"Component")," assembly attribute")),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"It's convention for the name of the component in the ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/configuration-layout-reference"},(0,a.kt)("inlineCode",{parentName:"a"},"layout"))," to be lower case and kebab case, i.e. ",(0,a.kt)("inlineCode",{parentName:"p"},"custom-component"),".")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs"},'// highlight-next-line\n[assembly: Component(typeof(CustomComponent), "custom-component", XmlNamespace = XmlNamespaces.App1Namespace)]\nnamespace App1.Components\n{\n    // highlight-next-line\n    class CustomComponent : ComponentBase\n    {\n        ...\n    }\n}\n')),(0,a.kt)("h2",{id:"components-and-layout"},"Components and Layout"),(0,a.kt)("p",null,"Once a component has been registered, it can be used in a layout by referring it by name and namespace."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="utf-8" ?>\n<layout\n    xmlns="https://geocortex.com/layout/v1"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="https://geocortex.com/layout/v1 ../../ViewerSpec/layout/layout-mobile.xsd"\n    // highlight-start\n    xmlns:custom="https://your.org/layout/app1">\n    <custom:custom-component/>\n    // highlight-end\n</layout>\n')),(0,a.kt)("h2",{id:"component-anatomy"},"Component Anatomy"),(0,a.kt)("p",null,"VertiGIS Studio Mobile is built on top of the ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/xamarin/"},"Xamarin Platform"),". In general, ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/xamarin/xamarin-forms/xaml/"},"XAML Views")," are used to define reactive component UI. Component Views in VertiGIS Studio Mobile are built with the ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/xamarin/xamarin-forms/xaml/xaml-basics/data-bindings-to-mvvm"},"Model-View-ViewModel (MVVM) pattern"),". The model for components is usually either ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/configuration-app-config-getting-started"},"app config")," or a service hosting shared application data."),(0,a.kt)("h3",{id:"component-class"},"Component Class"),(0,a.kt)("p",null,"Each instance of a component class directly correlates to a component in the layout. A component class extends ",(0,a.kt)("inlineCode",{parentName:"p"},"ComponentBase")," and renders visual elements. As seen in the example below, components can provide their UI inline, but it is recommended that components render an associated XAML view instead."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs"},'[assembly: Component(typeof(CustomComponent), "custom-component", XmlNamespace = XmlNamespaces.App1Namespace)]\nnamespace App1.Components\n{\n    class CustomComponent : ComponentBase\n    {\n        protected override VisualElement Create(XNode node)\n        {\n            return new Label(){ Text = "My Custom Component" };\n        }\n    }\n}\n')),(0,a.kt)("h4",{id:"component-dependencies"},"Component Dependencies"),(0,a.kt)("p",null,"Components are instantiated by ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/sdk-dependency-injection"},"dependency injection")," when the layout is rendered. This means that a component can also list dependencies that have been registered with autofac, such as the ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/sdk-component-service-interactions"},(0,a.kt)("inlineCode",{parentName:"a"},"ILayoutModel<MapView>"))," in its constructor, and have them be passed at runtime. This also means that if a class associated with a component has application dependencies, such as a reference to the ",(0,a.kt)("inlineCode",{parentName:"p"},"MapOperations")," for map interactions, then the component will either need to provide that dependency somehow."),(0,a.kt)("p",null,"The preferred way to provide sub-dependencies to classes associated with components is to instantiate those associated classes with dependency injection also. Check out ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/sdk-dependency-injection#managing-sub-dependencies"},"managing sub-dependencies")," for an example."),(0,a.kt)("h3",{id:"xaml-view"},"XAML View"),(0,a.kt)("p",null,'XAML views and their respective "code-behind" are responsible for the presentation concerns of a component. Check out a ',(0,a.kt)("a",{parentName:"p",href:"https://github.com/geocortex/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/Custom/XamlComponent"},"complete example in the SDK samples"),"."),(0,a.kt)("p",null,"XAML views can use any ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/xamarin/xamarin-forms/xaml/xaml-controls"},"XAML Controls")," along with built-in ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/sdk-components-styling#using-vertigis-studio-mobile-views"},"VertiGIS Studio Mobile XAML Elements and styling"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<ContentView xmlns="http://xamarin.com/schemas/2014/forms"\n             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"\n             xmlns:d="http://xamarin.com/schemas/2014/forms/design"\n             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"\n             mc:Ignorable="d"\n             x:Class="Geocortex.Mobile.Samples.Samples.Custom.XamlComponent.XamlComponentView">\n    <ContentView.Content>\n        <StackLayout Margin="5">\n            <Label Text="Hello XAML Component!" />\n            <Label Text="This component view is created using a XAML view." />\n        </StackLayout>\n    </ContentView.Content>\n</ContentView>\n')),(0,a.kt)("h3",{id:"view-model"},"View Model"),(0,a.kt)("p",null,"Component view models are responsible for populating properties with data for the view to bind to. The data for the view model is usually provided by the component class, which can consume app config or other data from the application through ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/sdk-dependency-injection"},"dependency injection"),". View models can use commands and operations to interact with application services and other components."),(0,a.kt)("p",null,"Check out this example of a ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/geocortex/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/CustomSamples/BreadCrumbs"},"component with a view model"),"."),(0,a.kt)("h2",{id:"configuration-models"},"Configuration Models"),(0,a.kt)("p",null,"Every component is bound to specific ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/configuration-app-config-reference#app-items"},(0,a.kt)("strong",{parentName:"a"},"item type")),", and each item type is bound to a class ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/sdk-dependency-injection#appitem"},"registered as an ",(0,a.kt)("inlineCode",{parentName:"a"},"AppItem")," with autofac"),". This class instantiates itself with values from the app config in its constructor, acting as a configuration model. The component class then consumes this configuration model, and then passes the appropriate values to the view and view model."),(0,a.kt)(l.Z,{defaultValue:"model",values:[{label:"App Item Model",value:"model"},{label:"Component",value:"component"},{label:"App Config",value:"config"}],mdxType:"Tabs"},(0,a.kt)(p.Z,{value:"component",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs"},'// highlight-next-line\n[assembly: AppItemComponent(typeof(CustomComponent), "component-with-config", "my-app-item", XmlNamespace = XmlNamespaces.App1Namespace)]\nnamespace VertiGIS.Mobile.Samples.Samples.Custom.Component\n{\n    // highlight-next-line\n    internal class CustomComponent : AppItemComponentBase<MyAppItem>\n    {\n        private readonly IAppItem<MyAppItem> _appItemResolver;\n\n        private CustomComponentViewModel _viewModel;\n        private CustomComponentView _view;\n\n        // highlight-next-line\n        public CustomComponent(IAppItem<MyAppItem> itemResolver, Func<CustomComponentViewModel, CustomComponentView> viewFactory, CustomComponentViewModel viewModel)\n            : base(itemResolver)\n        {\n            _appItemResolver = itemResolver;\n\n            _viewModel = viewModel;\n            _view = viewFactory(viewModel);\n        }\n\n        protected override VisualElement Create(XNode node)\n        {\n            return _view;\n        }\n\n        protected override async Task DoInitializeAsync()\n        {\n            // highlight-start\n            var item = await _appItemResolver.ResolveAsync();\n            _viewModel.Text = item.ConfigText;\n            // highlight-end\n        }\n    }\n}\n'))),(0,a.kt)(p.Z,{value:"model",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs"},'// highlight-next-line\n[assembly: AppItem(MyAppItem.ConfigItemtype, typeof(MyAppItem))]\nnamespace VertiGIS.Mobile.Samples.Samples.Custom.ComponentConfiguration\n{\n    public class MyAppItem : VisualAppItem\n    {\n        // highlight-next-line\n        public const string ConfigItemtype = "my-app-item";\n\n        public string ConfigText { get; private set; }\n\n        public MyAppItem()\n            : this(Guid.NewGuid().ToString())\n        {\n        }\n\n        public MyAppItem(string id)\n            : this(new Properties { ["id"] = id })\n        {\n        }\n\n        public MyAppItem(Properties properties) :\n            base(properties, ConfigItemtype)\n        {\n            // highlight-start\n            if (properties.TryGetValue("text", out var text))\n            {\n                ConfigText = text as string ?? "Default text.";\n            }\n            // highlight-end\n        }\n    }\n}\n'))),(0,a.kt)(p.Z,{value:"config",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "schemaVersion": "1.0",\n\n  "items": [\n    ...\n    {\n      "$type": "my-app-item",\n      "id": "some-unique-id",\n      "title": "My Title"\n    }\n    ...\n  ]\n}\n')))),(0,a.kt)("h3",{id:"component-defaults"},"Component Defaults"),(0,a.kt)("p",null,"Most components support the ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/configuration-app-config-getting-started#linking-layout-to-app-config"},(0,a.kt)("inlineCode",{parentName:"a"},"config")," attribute")," in the layout, which links a component to configuration in the app config JSON. However, many configuration models have default values they can supply for initialization instead of relying on a value to exist in the config. Any ",(0,a.kt)("inlineCode",{parentName:"p"},"AppItem")," class can provide default values through the ",(0,a.kt)("inlineCode",{parentName:"p"},"CreateDefault")," method. This method should return an instance of the ",(0,a.kt)("inlineCode",{parentName:"p"},"AppItem")," which represents the default values."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs"},'[assembly: AppItem(MyAppItem.ConfigItemtype, typeof(MyAppItem))]\nnamespace VertiGIS.Mobile.Samples.Samples.Custom.ComponentConfiguration\n{\n    public class MyAppItem : VisualAppItem\n    {\n        public const string ConfigItemtype = "my-app-item";\n\n        ...\n\n        // highlight-start\n        public override object CreateDefault()\n        {\n            return new MyAppItem();\n        }\n        // highlight-end\n    }\n}\n')),(0,a.kt)("p",null,"This pattern is what allows you to place a map with no config in the layout and have it render a default map."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="utf-8" ?>\n<layout\n    xmlns="https://geocortex.com/layout/v1"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="https://geocortex.com/layout/v1 ../../ViewerSpec/layout/layout-mobile.xsd">\n    <map/> \x3c!-- The map component is populated with values from the MapExtension\'s `CreateDefault` function. --\x3e\n</layout>\n')),(0,a.kt)("h3",{id:"initialization-and-teardown"},"Initialization and Teardown"),(0,a.kt)("p",null,"Components have an initialization method, which can be used to perform asynchronous startup logic, and a teardown method, which can be used to free resources when a component is removed from the layout."),(0,a.kt)("admonition",{title:"Important",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Always call ",(0,a.kt)("inlineCode",{parentName:"p"},"base.Dispose(disposing)")," when overriding the ",(0,a.kt)("inlineCode",{parentName:"p"},"Dispose")," method. ",(0,a.kt)("inlineCode",{parentName:"p"},"ComponentBase")," already implements ",(0,a.kt)("inlineCode",{parentName:"p"},"IDisposable")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"IDisposableTracker"),", so only override the ",(0,a.kt)("inlineCode",{parentName:"p"},"Dispose")," method if you have created new managed resources which need to be cleaned up.")),(0,a.kt)("p",null,"To learn more about memory management in VertiGIS Studio Mobile, check out ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/sdk-memory-leaks"},"this article"),", and the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/geocortex/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/Conceptual/Disposal"},"relevant SDK sample"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs"},'[assembly: Component(typeof(CustomComponent), "component", XmlNamespace = XmlNamespaces.SamplesNamespace)]\nnamespace VertiGIS.Mobile.Samples.Samples.Custom.Component\n{\n    internal class CustomComponent : ComponentBase\n    {\n        private bool disposed = false;\n\n        public CustomComponent()\n        {\n        }\n\n        ...\n\n        protected override async Task DoInitializeAsync()\n        {\n            // Initialization code.\n            // ...\n        }\n\n        protected override void Dispose(bool disposing)\n        {\n            if (disposed)\n            {\n                return;\n            }\n\n            if (disposing)\n            {\n                // Clean up managed resources.\n                // ...\n            }\n\n            // Clean up unmanaged resources.\n            // ...\n\n            base.Dispose(disposing);\n\n            disposed = true;\n        }\n    }\n}\n')),(0,a.kt)("h2",{id:"component-lifecycle"},"Component Lifecycle"),(0,a.kt)("p",null,"When a VertiGIS Studio Mobile Application boots up, the set of components which are in the layout are created. Next, any components that are initially active, depending on the layout, will be activated and initialized. ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/configuration-layout-reference#panels"},"Components like the ",(0,a.kt)("inlineCode",{parentName:"a"},"Panel"))," will only activate their first child."),(0,a.kt)("h3",{id:"activation-and-deactivation"},"Activation and Deactivation"),(0,a.kt)("p",null,"Custom code can listen and react to a components activation or deactivation by subscribing to the ",(0,a.kt)("inlineCode",{parentName:"p"},"ui.activated")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"ui.deactivated")," event. The ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/api-commands-operations-events#events"},(0,a.kt)("inlineCode",{parentName:"a"},"ui.*")," events")," contain various events relating to the component lifecycle."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"The ",(0,a.kt)("inlineCode",{parentName:"p"},"UIOperations")," class contains implements the commands ",(0,a.kt)("inlineCode",{parentName:"p"},"ui.activate")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"ui.deactivate")," which can be used to examine and manipulate the activation state of components.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs"},"class CustomComponent : ComponentBase\n{\n    public CustomComponent(UIEvents uiEvents)\n    {\n        uiEvents.ComponentActivated.Subscribe(_onComponentActivated, this);\n        uiEvents.ComponentDeactivated.Subscribe(_onComponentDeactivated, this);\n\n    private async void _onComponentActivated(string id)\n    {\n        // ... react to component activation.\n    }\n\n    private async void _onComponentDeactivated(string id)\n    {\n        // ... react to component deactivation.\n    }\n    ...\n}\n\n")),(0,a.kt)("h2",{id:"relevant-sdk-samples"},"Relevant SDK Samples"),(0,a.kt)("p",null,"Check out the relevant VertiGIS Studio Mobile SDK Samples:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://github.com/geocortex/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/Custom/Component"},"Custom Component"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://github.com/geocortex/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/Custom/ComponentConfiguration"},"Component with Configuration"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://github.com/geocortex/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/Custom/XamlComponent"},"Component with XAML UI")))),(0,a.kt)("h2",{id:"next-steps"},"Next Steps"),(0,a.kt)(s.Z,{mdxType:"UseCaseContainer"},(0,a.kt)(r.Z,{title:"Learn how to use Commands and Operations with Components",description:"Learn how to run and implement commands and operations with custom components",link:(0,i.Z)("docs/mobile/sdk-commands-operations"),mdxType:"UseCaseCard"}),(0,a.kt)(r.Z,{title:"Learn about Component Interactions",description:"Learn about how components and services can interact with each other",link:(0,i.Z)("docs/mobile/sdk-component-service-interactions"),mdxType:"UseCaseCard"}),(0,a.kt)(r.Z,{title:"Create a Component with a Complex UI",description:"Follow along with a more in depth component example",link:(0,i.Z)("docs/mobile/tutorial-implement-component-with-ui"),mdxType:"UseCaseCard"}),(0,a.kt)(r.Z,{title:"Create a Component that Consumes App Config",description:"Learn more about writing components that consume configuration values.",link:(0,i.Z)("docs/mobile/tutorial-implement-component-participate-app-config"),mdxType:"UseCaseCard"})))}b.isMDXComponent=!0}}]);