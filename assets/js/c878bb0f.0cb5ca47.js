"use strict";(globalThis.webpackChunkvertigis_studio_dev_center=globalThis.webpackChunkvertigis_studio_dev_center||[]).push([[9294],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=p(n),d=r,f=m["".concat(s,".").concat(d)]||m[d]||u[d]||a;return n?o.createElement(f,l(l({ref:t},c),{},{components:n})):o.createElement(f,l({ref:t},c))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,l=new Array(a);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[m]="string"==typeof e?e:r,l[1]=i;for(var p=2;p<a;p++)l[p]=n[p];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(7294),r=n(6010);const a={tabItem:"tabItem_Ymn6"};function l(e){let{children:t,hidden:n,className:l}=e;return o.createElement("div",{role:"tabpanel",className:(0,r.Z)(a.tabItem,l),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>k});var o=n(7462),r=n(7294),a=n(6010),l=n(2466),i=n(6550),s=n(1980),p=n(7392),c=n(12);function m(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:o,default:r}}=e;return{value:t,label:n,attributes:o,default:r}}))}function u(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??m(n);return function(e){const t=(0,p.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function d(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function f(e){let{queryString:t=!1,groupId:n}=e;const o=(0,i.k6)(),a=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,s._X)(a),(0,r.useCallback)((e=>{if(!a)return;const t=new URLSearchParams(o.location.search);t.set(a,e),o.replace({...o.location,search:t.toString()})}),[a,o])]}function h(e){const{defaultValue:t,queryString:n=!1,groupId:o}=e,a=u(e),[l,i]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const o=n.find((e=>e.default))??n[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:t,tabValues:a}))),[s,p]=f({queryString:n,groupId:o}),[m,h]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[o,a]=(0,c.Nk)(n);return[o,(0,r.useCallback)((e=>{n&&a.set(e)}),[n,a])]}({groupId:o}),b=(()=>{const e=s??m;return d({value:e,tabValues:a})?e:null})();(0,r.useLayoutEffect)((()=>{b&&i(b)}),[b]);return{selectedValue:l,selectValue:(0,r.useCallback)((e=>{if(!d({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);i(e),p(e),h(e)}),[p,h,a]),tabValues:a}}var b=n(2389);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function g(e){let{className:t,block:n,selectedValue:i,selectValue:s,tabValues:p}=e;const c=[],{blockElementScrollPositionUntilNextRender:m}=(0,l.o5)(),u=e=>{const t=e.currentTarget,n=c.indexOf(t),o=p[n].value;o!==i&&(m(t),s(o))},d=e=>{let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const n=c.indexOf(e.currentTarget)+1;t=c[n]??c[0];break}case"ArrowLeft":{const n=c.indexOf(e.currentTarget)-1;t=c[n]??c[c.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":n},t)},p.map((e=>{let{value:t,label:n,attributes:l}=e;return r.createElement("li",(0,o.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>c.push(e),onKeyDown:d,onClick:u},l,{className:(0,a.Z)("tabs__item",y.tabItem,l?.className,{"tabs__item--active":i===t})}),n??t)})))}function v(e){let{lazy:t,children:n,selectedValue:o}=e;const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=a.find((e=>e.props.value===o));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},a.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==o}))))}function C(e){const t=h(e);return r.createElement("div",{className:(0,a.Z)("tabs-container",y.tabList)},r.createElement(g,(0,o.Z)({},e,t)),r.createElement(v,(0,o.Z)({},e,t)))}function k(e){const t=(0,b.Z)();return r.createElement(C,(0,o.Z)({key:String(t)},e))}},5858:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(9960),r=n(7294),a=n(6010);const l={root:"root_Uwqo"};function i(e){let{title:t,description:n,link:i}=e;return r.createElement("div",{className:(0,a.Z)("card-demo",l.root)},r.createElement("div",{className:"card"},r.createElement("div",{className:"card__header"},r.createElement("h3",null,t)),r.createElement("div",{className:"card__body"},r.createElement("p",null,n)),r.createElement("div",{className:"card__footer"},r.createElement(o.Z,{className:"button button--secondary button--block",to:i},"Get Started"))))}},7467:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(7294);const r={root:"root_vxd5"};function a(e){let{children:t}=e;return o.createElement("div",{className:r.root},t)}},2322:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>m,default:()=>y,frontMatter:()=>c,metadata:()=>u,toc:()=>f});var o=n(7462),r=(n(7294),n(3905)),a=n(4996),l=n(4866),i=n(5162),s=n(5858),p=n(7467);const c={title:"Create a Component",description:"VertiGIS Studio Web - Create a component for VertiGIS Studio Web"},m=void 0,u={unversionedId:"web/sdk-components-create",id:"web/sdk-components-create",title:"Create a Component",description:"VertiGIS Studio Web - Create a component for VertiGIS Studio Web",source:"@site/docs/web/sdk-components-create.mdx",sourceDirName:"web",slug:"/web/sdk-components-create",permalink:"/docs/web/sdk-components-create",draft:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/web/sdk-components-create.mdx",tags:[],version:"current",frontMatter:{title:"Create a Component",description:"VertiGIS Studio Web - Create a component for VertiGIS Studio Web"},sidebar:"web",previous:{title:"Overview",permalink:"/docs/web/sdk-components-overview"},next:{title:"Component Reference",permalink:"/docs/web/sdk-components-reference"}},d={},f=[{value:"Create the Component",id:"create-the-component",level:2},{value:"Create the Component Model",id:"create-the-component-model",level:2},{value:"Register the Component",id:"register-the-component",level:2},{value:"Add the Component to your Layout",id:"add-the-component-to-your-layout",level:2},{value:"Next Steps",id:"next-steps",level:2}],h={toc:f},b="wrapper";function y(e){let{components:t,...n}=e;return(0,r.kt)(b,(0,o.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/docs/web/sdk-overview"},"VertiGIS Studio Web SDK")," project template includes an example of a ",(0,r.kt)("a",{parentName:"p",href:"/docs/web/sdk-components-create"},"custom component")," following our best practices. Creating a new custom component involves a few important steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#create-the-component"},"Create the component source file")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#create-the-component-model"},"Create the component model")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#register-the-component"},"Register the component and component model in your library registration file"))),(0,r.kt)("h2",{id:"create-the-component"},"Create the Component"),(0,r.kt)("p",null,"Create the component source file in a new folder within the ",(0,r.kt)("inlineCode",{parentName:"p"},"src/components")," folder. For example to create a new component called ",(0,r.kt)("inlineCode",{parentName:"p"},"ExampleComponent"),", create a new file called ",(0,r.kt)("inlineCode",{parentName:"p"},"ExampleComponent.tsx")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"src/components/ExampleComponent")," with the following content:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/components/ExampleComponent/ExampleComponent.tsx"',title:'"src/components/ExampleComponent/ExampleComponent.tsx"'},'import {\n    LayoutElement,\n    LayoutElementProperties,\n} from "@vertigis/web/components";\nimport React from "react";\n\n// We will create this model in the next step.\nimport ExampleComponentModel from "./ExampleComponentModel";\n\nconst ExampleComponent = (\n    props: LayoutElementProperties<ExampleComponentModel>\n) => {\n    const { model } = props;\n\n    return (\n        <LayoutElement {...props}>\n            <p>{model.exampleValue}</p>\n        </LayoutElement>\n    );\n};\n\nexport default ExampleComponent;\n')),(0,r.kt)("h2",{id:"create-the-component-model"},"Create the Component Model"),(0,r.kt)("p",null,"Next we need to create the ",(0,r.kt)("a",{parentName:"p",href:"/docs/web/sdk-components-reference#models"},"component model")," that will be bound to the component we just created. This model will function as the underlying data source for the component."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"It's best practice to use the model to define configurable or persistent state, and use the React state hooks for UI specific transient state, like an active selection.")),(0,r.kt)("p",null,"Create a new file called ",(0,r.kt)("inlineCode",{parentName:"p"},"ExampleComponentModel.ts")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"src/components/ExampleComponent"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/components/ExampleComponent/ExampleComponentModel.ts"',title:'"src/components/ExampleComponent/ExampleComponentModel.ts"'},'import {\n    ComponentModelBase,\n    ComponentModelProperties,\n    serializable,\n    PropertyDefs,\n} from "@vertigis/web/models";\n\ninterface ExampleComponentModelProperties\n    extends ComponentModelProperties {\n    exampleValue?: string;\n}\n\n// The serializable decorator marks this class as being serializable\n// so it can be serialized to/from the app.json configuration of\n// your app.\n@serializable\nexport default class ExampleComponentModel extends ComponentModelBase<ExampleComponentModelProperties> {\n    exampleValue: string;\n\n    // This method defines how the model will be serialized and deserialized into\n    // an app item. We override it to include our new property `exampleValue`.\n    protected _getSerializableProperties(): PropertyDefs<ExampleComponentModelProperties> {\n        const props = super._getSerializableProperties();\n        return {\n            ...props,\n            exampleValue: {\n                serializeModes: ["initial"],\n                default: "Default Value",\n            },\n        };\n    }\n}\n')),(0,r.kt)("h2",{id:"register-the-component"},"Register the Component"),(0,r.kt)("p",null,"Finally we need to register the component and component model with the VertiGIS Studio Web component registry so that it is aware of your new component."),(0,r.kt)("p",null,"To simplify the module imports, we'll make a new file in the ",(0,r.kt)("inlineCode",{parentName:"p"},"ExampleComponent")," folder called ",(0,r.kt)("inlineCode",{parentName:"p"},"index.ts"),". Note that this file is for convenience, and is not required:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/components/ExampleComponent/index.ts"',title:'"src/components/ExampleComponent/index.ts"'},'export { default } from "./ExampleComponent";\nexport { default as ExampleComponentModel } from "./ExampleComponentModel";\n')),(0,r.kt)("p",null,"Now register your component and component model with the component registry by modifying the ",(0,r.kt)("inlineCode",{parentName:"p"},"src/index.ts")," file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/index.ts"',title:'"src/index.ts"'},'import { LibraryRegistry } from "@vertigis/web/config";\n\n// highlight-start\nimport ExampleComponent, {\n    ExampleComponentModel,\n} from "./components/ExampleComponent";\n// highlight-end\n\n// This namespace is generated when you create your project\n// and will be unique to your library.\nconst LAYOUT_NAMESPACE = "custom.abc123";\n\nexport default function (registry: LibraryRegistry) {\n    // ... other item registrations\n\n    // highlight-start\n    registry.registerComponent({\n        name: "example",\n        namespace: LAYOUT_NAMESPACE,\n        getComponentType: () => ExampleComponent,\n        itemType: "example-model",\n        title: "Example Component",\n    });\n    registry.registerModel({\n        getModel: (config) => new ExampleComponentModel(config),\n        itemType: "example-model",\n    });\n    // highlight-end\n}\n')),(0,r.kt)("h2",{id:"add-the-component-to-your-layout"},"Add the Component to your Layout"),(0,r.kt)("p",null,"You can now add the component to your ",(0,r.kt)("inlineCode",{parentName:"p"},"layout.xml")," file and run the development server to see it in use."),(0,r.kt)(l.Z,{defaultValue:"layout",values:[{label:"Layout",value:"layout"},{label:"UI",value:"ui"}],mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"layout",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml",metastring:'title="app/layout.xml"',title:'"app/layout.xml"'},'<?xml version="1.0" encoding="UTF-8"?>\n<layout xmlns="https://geocortex.com/layout/v1" xmlns:custom="custom.abc123">\n    <custom:example margin="3"/>\n</layout>\n'))),(0,r.kt)(i.Z,{value:"ui",mdxType:"TabItem"},(0,r.kt)("img",{src:(0,a.Z)("img/web-sdk-components-create.png")}))),(0,r.kt)("h2",{id:"next-steps"},"Next Steps"),(0,r.kt)(p.Z,{mdxType:"UseCaseContainer"},(0,r.kt)(s.Z,{title:"Check out the Component Reference",description:"Take a deep dive into components in the VertiGIS Studio Web SDK",link:(0,a.Z)("docs/web/sdk-components-reference"),mdxType:"UseCaseCard"}),(0,r.kt)(s.Z,{title:"Deploy your Component",description:"Learn how to deploy your custom component.",link:(0,a.Z)("docs/web/sdk-deployment"),mdxType:"UseCaseCard"}),(0,r.kt)(s.Z,{title:"Create a Component with a Complex UI",description:"Follow along with a more in depth component example",link:(0,a.Z)("docs/web/tutorial-implement-component-with-ui"),mdxType:"UseCaseCard"}),(0,r.kt)(s.Z,{title:"Create a Component that Consumes App Config",description:"Learn more about writing components that consume configuration values.",link:(0,a.Z)("docs/web/tutorial-implement-component-participate-app-config"),mdxType:"UseCaseCard"})))}y.isMDXComponent=!0}}]);