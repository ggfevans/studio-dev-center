"use strict";(globalThis.webpackChunkvertigis_studio_dev_center=globalThis.webpackChunkvertigis_studio_dev_center||[]).push([[5397,5343],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>v});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),d=a,v=u["".concat(l,".").concat(d)]||u[d]||m[d]||i;return n?r.createElement(v,o(o({ref:t},p),{},{components:n})):r.createElement(v,o({ref:t},p))}));function v(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:a,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(7294),a=n(6010);const i={tabItem:"tabItem_Ymn6"};function o(e){let{children:t,hidden:n,className:o}=e;return r.createElement("div",{role:"tabpanel",className:(0,a.Z)(i.tabItem,o),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>k});var r=n(7462),a=n(7294),i=n(6010),o=n(2466),s=n(6550),l=n(1980),c=n(7392),p=n(12);function u(e){return function(e){return a.Children.map(e,(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:r,default:a}}=e;return{value:t,label:n,attributes:r,default:a}}))}function m(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=t??u(n);return function(e){const t=(0,c.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function d(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function v(e){let{queryString:t=!1,groupId:n}=e;const r=(0,s.k6)(),i=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l._X)(i),(0,a.useCallback)((e=>{if(!i)return;const t=new URLSearchParams(r.location.search);t.set(i,e),r.replace({...r.location,search:t.toString()})}),[i,r])]}function h(e){const{defaultValue:t,queryString:n=!1,groupId:r}=e,i=m(e),[o,s]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=n.find((e=>e.default))??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:i}))),[l,c]=v({queryString:n,groupId:r}),[u,h]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[r,i]=(0,p.Nk)(n);return[r,(0,a.useCallback)((e=>{n&&i.set(e)}),[n,i])]}({groupId:r}),g=(()=>{const e=l??u;return d({value:e,tabValues:i})?e:null})();(0,a.useLayoutEffect)((()=>{g&&s(g)}),[g]);return{selectedValue:o,selectValue:(0,a.useCallback)((e=>{if(!d({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);s(e),c(e),h(e)}),[c,h,i]),tabValues:i}}var g=n(2389);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function b(e){let{className:t,block:n,selectedValue:s,selectValue:l,tabValues:c}=e;const p=[],{blockElementScrollPositionUntilNextRender:u}=(0,o.o5)(),m=e=>{const t=e.currentTarget,n=p.indexOf(t),r=c[n].value;r!==s&&(u(t),l(r))},d=e=>{let t=null;switch(e.key){case"Enter":m(e);break;case"ArrowRight":{const n=p.indexOf(e.currentTarget)+1;t=p[n]??p[0];break}case"ArrowLeft":{const n=p.indexOf(e.currentTarget)-1;t=p[n]??p[p.length-1];break}}t?.focus()};return a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":n},t)},c.map((e=>{let{value:t,label:n,attributes:o}=e;return a.createElement("li",(0,r.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:e=>p.push(e),onKeyDown:d,onClick:m},o,{className:(0,i.Z)("tabs__item",f.tabItem,o?.className,{"tabs__item--active":s===t})}),n??t)})))}function S(e){let{lazy:t,children:n,selectedValue:r}=e;const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=i.find((e=>e.props.value===r));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return a.createElement("div",{className:"margin-top--md"},i.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==r}))))}function y(e){const t=h(e);return a.createElement("div",{className:(0,i.Z)("tabs-container",f.tabList)},a.createElement(b,(0,r.Z)({},e,t)),a.createElement(S,(0,r.Z)({},e,t)))}function k(e){const t=(0,g.Z)();return a.createElement(y,(0,r.Z)({key:String(t)},e))}},5858:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(9960),a=n(7294),i=n(6010);const o={root:"root_Uwqo"};function s(e){let{title:t,description:n,link:s}=e;return a.createElement("div",{className:(0,i.Z)("card-demo",o.root)},a.createElement("div",{className:"card"},a.createElement("div",{className:"card__header"},a.createElement("h3",null,t)),a.createElement("div",{className:"card__body"},a.createElement("p",null,n)),a.createElement("div",{className:"card__footer"},a.createElement(r.Z,{className:"button button--secondary button--block",to:s},"Get Started"))))}},7467:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(7294);const a={root:"root_vxd5"};function i(e){let{children:t}=e;return r.createElement("div",{className:a.root},t)}},5668:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>v,contentTitle:()=>m,default:()=>b,frontMatter:()=>u,metadata:()=>d,toc:()=>h});var r=n(7462),a=(n(7294),n(3905)),i=n(4996),o=n(5858),s=n(7467),l=n(4866),c=n(5162),p=n(6557);const u={title:"Service Reference",description:"VertiGIS Studio Mobile - Service reference"},m=void 0,d={unversionedId:"mobile/sdk-services-reference",id:"mobile/sdk-services-reference",title:"Service Reference",description:"VertiGIS Studio Mobile - Service reference",source:"@site/docs/mobile/sdk-services-reference.mdx",sourceDirName:"mobile",slug:"/mobile/sdk-services-reference",permalink:"/docs/mobile/sdk-services-reference",draft:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/mobile/sdk-services-reference.mdx",tags:[],version:"current",frontMatter:{title:"Service Reference",description:"VertiGIS Studio Mobile - Service reference"},sidebar:"mobile",previous:{title:"Create a Service",permalink:"/docs/mobile/sdk-services-create"},next:{title:"Overview",permalink:"/docs/mobile/sdk-events-overview"}},v={},h=[{value:"Service Registration",id:"service-registration",level:2},{value:"Service Lifecycle",id:"service-lifecycle",level:2},{value:"Initialization and Teardown",id:"initialization-and-teardown",level:2},{value:"Dependency Injection",id:"dependency-injection",level:2},{value:"Configuration Models",id:"configuration-models",level:2},{value:"Relevant SDK Samples",id:"relevant-sdk-samples",level:2},{value:"Next Steps",id:"next-steps",level:2}],g={toc:h},f="wrapper";function b(e){let{components:t,...n}=e;return(0,a.kt)(f,(0,r.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Services act as a repository of accessible behavior and data, and can be used for a variety of purposes, from implementing commands and operations, to managing shared data, to interfacing with the REST API of an external service."),(0,a.kt)("h2",{id:"service-registration"},"Service Registration"),(0,a.kt)("p",null,"All services need to be registered with VertiGIS Studio Mobile. A service is created by extending the ",(0,a.kt)("inlineCode",{parentName:"p"},"ServiceBase")," class and registering the service class with Autofac through an assembly attribute."),(0,a.kt)(p.default,{mdxType:"AutofacSnippet"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs"},"// highlight-next-line\n[assembly: Service(typeof(CustomService), PropertiesAutowired = true)]\nnamespace App1.Services\n{\n    // highlight-next-line\n    class CustomService : ServiceBase\n    {\n        ...\n    }\n}\n")),(0,a.kt)("h2",{id:"service-lifecycle"},"Service Lifecycle"),(0,a.kt)("p",null,"On application load, all services that have been registered with wih VertiGIS Studio Mobile are first created and then initialized."),(0,a.kt)("p",null,"Services are destroyed (i.e. the ",(0,a.kt)("inlineCode",{parentName:"p"},"_onDestroy")," method is invoked) when the application is destroyed, e.g. when killing the application or switching applications in VertiGIS Studio Go."),(0,a.kt)("h2",{id:"initialization-and-teardown"},"Initialization and Teardown"),(0,a.kt)("p",null,"Services have an initialization method, which can be used to perform asynchronous startup logic, and a teardown method, which can be used to free resources when the application is destroyed."),(0,a.kt)("admonition",{title:"Important",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Always call ",(0,a.kt)("inlineCode",{parentName:"p"},"base.Dispose(disposing)")," when overriding the ",(0,a.kt)("inlineCode",{parentName:"p"},"Dispose")," method. ",(0,a.kt)("inlineCode",{parentName:"p"},"ServiceBase")," already implements ",(0,a.kt)("inlineCode",{parentName:"p"},"IDisposable")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"IDisposableTracker"),", so only override the ",(0,a.kt)("inlineCode",{parentName:"p"},"Dispose")," method if you have created new managed resources which need to be cleaned up.")),(0,a.kt)("p",null,"To learn more about memory management in VertiGIS Studio Mobile, check out ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/sdk-memory-leaks"},"this article"),", and the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/geocortex/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/Conceptual/Disposal"},"relevant SDK sample"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs"},"[assembly: Service(typeof(CustomService), PropertiesAutowired = true)]\nnamespace App1.Services\n{\n    class CustomService : ServiceBase\n    {\n        private bool disposed = false;\n\n        public CustomService()\n            : base()\n        {\n            // On creation logic here\n\n        }\n        protected override async Task DoInitialize()\n        {\n            // Async on initialization logic here\n            return;\n        }\n\n        protected override void Dispose(bool disposing)\n        {\n            if (disposed)\n            {\n                return;\n            }\n\n            if (disposing)\n            {\n                // Clean up managed resources.\n                // ...\n            }\n\n            // Clean up unmanaged resources.\n            // ...\n\n            // highlight-next-line\n            base.Dispose(disposing);\n\n            disposed = true;\n        }\n\n\n    }\n}\n")),(0,a.kt)("h2",{id:"dependency-injection"},"Dependency Injection"),(0,a.kt)("p",null,"Services interact with the larger application by injecting their dependencies. Services can inject commands and operations, other services, and any other class registered with Autofac."),(0,a.kt)("p",null,"The following example injects the UI operations and the dialog controller into a custom service."),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Services are not intended to directly interact with each other. Instead, services should ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/sdk-commands-operations#implementing-commands-and-operations"},"implement operations")," which can be called by other services to indirectly interact.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs"},"[assembly: Service(typeof(CustomService), PropertiesAutowired = true)]\nnamespace App1.Services\n{\n    class CustomService : ServiceBase\n    {\n        private UIOperations _uiOperations;\n        private IDialogController _dialogController;\n\n        public CustomService(UIOperations uiOperations, IDialogController dialogController)\n            : base()\n        {\n            _uiOperations = uiOperations;\n            _dialogController = dialogController;\n        }\n        ...\n    }\n}\n")),(0,a.kt)("h2",{id:"configuration-models"},"Configuration Models"),(0,a.kt)("p",null,"Like components, services can be configured through the ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/configuration-app-config-getting-started"},"app config"),". Services can participate in the app config by creating and injecting the appropriate ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/configuration-app-config-reference#app-items"},(0,a.kt)("strong",{parentName:"a"},"item type")),"."),(0,a.kt)("p",null,"Each item type in the application is bound to a class ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/sdk-dependency-injection#appitem"},"registered as an ",(0,a.kt)("inlineCode",{parentName:"a"},"AppItem")," with autofac"),". This class instantiates itself with values from the app config in its constructor, acting as a configuration model."),(0,a.kt)("p",null,"A service can consume configuration by injecting the ",(0,a.kt)("inlineCode",{parentName:"p"},"AppItem")," class as a dependency in its constructor."),(0,a.kt)(l.Z,{defaultValue:"service",values:[{label:"Service Configuration Model",value:"model"},{label:"Service",value:"service"},{label:"App Config",value:"config"}],mdxType:"Tabs"},(0,a.kt)(c.Z,{value:"service",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs"},"[assembly: Service(typeof(CustomService), PropertiesAutowired = true)]\nnamespace App1.Services\n{\n    class CustomService : ServiceBase\n    {\n        private IAppItem<CustomServiceSettings> _appItem;\n\n        public CustomService(IAppItem<CustomServiceSettings> appItem)\n            : base()\n        {\n            _appItem = appItem;\n        }\n        protected override async Task DoInitialize()\n        {\n            // highlight-start\n            var settings = await _appItem.ResolveAsync();\n            if (settings == null)\n            {\n                return;\n            }\n\n            Logger.Debug($\"Value of setting is '{settings.SomeSetting}'\");\n            // highlight-end\n        }\n    }\n}\n"))),(0,a.kt)(c.Z,{value:"model",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs"},'// highlight-next-line\n[assembly: AppItem(CustomServiceSettings.AppItemType, typeof(CustomServiceSettings))]\nnamespace App1.Services\n{\n    // highlight-next-line\n    [ServiceAppItem(AppItemType)]\n    public class CustomServiceSettings\n    {\n        // highlight-next-line\n        public const string AppItemType = "custom-service";\n\n        public string SomeSetting { get; set; }\n\n        public CustomServiceSettings()\n        {\n        }\n\n        public CustomServiceSettings(Properties properties)\n        {\n            // highlight-start\n            if (properties is null)\n            {\n                throw new System.ArgumentNullException(nameof(properties));\n            }\n\n            if (properties.TryGetValue("someSetting", out string someSetting))\n            {\n                SomeSetting = someSetting;\n            }\n            // highlight-end\n        }\n    }\n}\n'))),(0,a.kt)(c.Z,{value:"config",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "schemaVersion": "1.0",\n\n    "items": [\n        ...{\n            "$type": "custom-service",\n            "id": "custom-service",\n            "someSetting": "Some Value"\n        }\n    ]\n}\n')))),(0,a.kt)("h2",{id:"relevant-sdk-samples"},"Relevant SDK Samples"),(0,a.kt)("p",null,"Check out the relevant VertiGIS Studio Mobile SDK Samples:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://github.com/geocortex/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/Custom/Service"},"Custom Service"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://github.com/geocortex/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/CustomSamples/BasemapToggle"},"Basemap Toggle that uses a Custom Service"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://github.com/geocortex/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/CustomSamples/BreadCrumbs"},"Breadcrumb Tracker that Uses a Custom Service")))),(0,a.kt)("h2",{id:"next-steps"},"Next Steps"),(0,a.kt)(s.Z,{mdxType:"UseCaseContainer"},(0,a.kt)(o.Z,{title:"Learn how to use Commands and Operations with Services",description:"Learn how to run and implement commands and operations with custom services",link:(0,i.Z)("docs/mobile/sdk-commands-operations"),mdxType:"UseCaseCard"}),(0,a.kt)(o.Z,{title:"Learn about Service Interactions",description:"Learn about how services and components can interact",link:(0,i.Z)("docs/mobile/sdk-component-service-interactions"),mdxType:"UseCaseCard"}),(0,a.kt)(o.Z,{title:"Build a Custom Command with a Custom Service",description:"Follow a step by step guide to building a custom command with a custom service",link:(0,i.Z)("docs/mobile/tutorial-implement-command-operation"),mdxType:"UseCaseCard"}),(0,a.kt)(o.Z,{title:"Build a Service that Manages Dynamic Data",description:"Built a service that manages a dynamic data source and exposes it to components",link:(0,i.Z)("docs/mobile/tutorial-implement-service-fetch-dynamic-data"),mdxType:"UseCaseCard"})))}b.isMDXComponent=!0},6557:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var r=n(7462),a=(n(7294),n(3905));const i={},o=void 0,s={unversionedId:"snippets/autofac-mobile",id:"snippets/autofac-mobile",title:"autofac-mobile",description:"VertiGIS Studio Mobile uses Autofac to register, locate, and inject components, services and other classes. See dependency injection for more info.",source:"@site/docs/snippets/autofac-mobile.mdx",sourceDirName:"snippets",slug:"/snippets/autofac-mobile",permalink:"/docs/snippets/autofac-mobile",draft:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/snippets/autofac-mobile.mdx",tags:[],version:"current",frontMatter:{}},l={},c=[],p={toc:c},u="wrapper";function m(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"VertiGIS Studio Mobile uses ",(0,a.kt)("a",{parentName:"p",href:"https://autofaccn.readthedocs.io/en/latest/index.html"},"Autofac")," to register, locate, and inject components, services and other classes. See ",(0,a.kt)("a",{parentName:"p",href:"/docs/mobile/sdk-dependency-injection"},"dependency injection")," for more info.")))}m.isMDXComponent=!0}}]);