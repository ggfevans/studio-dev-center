"use strict";(globalThis.webpackChunkvertigis_studio_dev_center=globalThis.webpackChunkvertigis_studio_dev_center||[]).push([[3394,460],{3905:(e,t,o)=>{o.d(t,{Zo:()=>u,kt:()=>k});var r=o(7294);function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){i(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function a(e,t){if(null==e)return{};var o,r,i=function(e,t){if(null==e)return{};var o,r,i={},n=Object.keys(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||(i[o]=e[o]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var s=r.createContext({}),d=function(e){var t=r.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):l(l({},t),e)),o},u=function(e){var t=d(e.components);return r.createElement(s.Provider,{value:t},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var o=e.components,i=e.mdxType,n=e.originalType,s=e.parentName,u=a(e,["components","mdxType","originalType","parentName"]),p=d(o),m=i,k=p["".concat(s,".").concat(m)]||p[m]||c[m]||n;return o?r.createElement(k,l(l({ref:t},u),{},{components:o})):r.createElement(k,l({ref:t},u))}));function k(e,t){var o=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var n=o.length,l=new Array(n);l[0]=m;var a={};for(var s in t)hasOwnProperty.call(t,s)&&(a[s]=t[s]);a.originalType=e,a[p]="string"==typeof e?e:i,l[1]=a;for(var d=2;d<n;d++)l[d]=o[d];return r.createElement.apply(null,l)}return r.createElement.apply(null,o)}m.displayName="MDXCreateElement"},5858:(e,t,o)=>{o.d(t,{Z:()=>a});var r=o(9960),i=o(7294),n=o(6010);const l={root:"root_Uwqo"};function a(e){let{title:t,description:o,link:a}=e;return i.createElement("div",{className:(0,n.Z)("card-demo",l.root)},i.createElement("div",{className:"card"},i.createElement("div",{className:"card__header"},i.createElement("h3",null,t)),i.createElement("div",{className:"card__body"},i.createElement("p",null,o)),i.createElement("div",{className:"card__footer"},i.createElement(r.Z,{className:"button button--secondary button--block",to:a},"Get Started"))))}},7467:(e,t,o)=>{o.d(t,{Z:()=>n});var r=o(7294);const i={root:"root_vxd5"};function n(e){let{children:t}=e;return r.createElement("div",{className:i.root},t)}},123:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>u,default:()=>v,frontMatter:()=>d,metadata:()=>p,toc:()=>m});var r=o(7462),i=(o(7294),o(3905)),n=o(4996),l=o(7467),a=o(5858),s=o(8904);const d={title:"Using the .NET Workflow SDK with VertiGIS Studio Workflow Server",sidebar_label:"SDK Overview",description:"VertiGIS Studio Workflow - Overview of extending workflow for VertiGIS Studio Workflow Server"},u=void 0,p={unversionedId:"workflow/sdk-server-overview",id:"workflow/sdk-server-overview",title:"Using the .NET Workflow SDK with VertiGIS Studio Workflow Server",description:"VertiGIS Studio Workflow - Overview of extending workflow for VertiGIS Studio Workflow Server",source:"@site/docs/workflow/sdk-server-overview.mdx",sourceDirName:"workflow",slug:"/workflow/sdk-server-overview",permalink:"/docs/workflow/sdk-server-overview",draft:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/workflow/sdk-server-overview.mdx",tags:[],version:"current",frontMatter:{title:"Using the .NET Workflow SDK with VertiGIS Studio Workflow Server",sidebar_label:"SDK Overview",description:"VertiGIS Studio Workflow - Overview of extending workflow for VertiGIS Studio Workflow Server"},sidebar:"workflow",previous:{title:"Implement an Loading Indicator Form Element",permalink:"/docs/workflow/tutorial-mobile-activity-indicator-form-element"},next:{title:"Create an Activity",permalink:"/docs/workflow/sdk-server-create-activity"}},c={},m=[{value:"Requirements",id:"requirements",level:2},{value:"Development Environment",id:"development-environment",level:2},{value:"Setting up a VertiGIS Studio Workflow Server Extension Project",id:"setting-up-a-vertigis-studio-workflow-server-extension-project",level:2},{value:"Deploying VertiGIS Studio Workflow Server Activities",id:"deploying-vertigis-studio-workflow-server-activities",level:2},{value:"Debugging Server Workflow Activities",id:"debugging-server-workflow-activities",level:2},{value:"Automating Deployment of Server Workflow Activities",id:"automating-deployment-of-server-workflow-activities",level:2},{value:"Next Steps",id:"next-steps",level:2}],k={toc:m},f="wrapper";function v(e){let{components:t,...o}=e;return(0,i.kt)(f,(0,r.Z)({},k,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"VertiGIS Studio Workflow Server can be extended by augmenting your on-premises installation with additional custom .NET assemblies."),(0,i.kt)("h2",{id:"requirements"},"Requirements"),(0,i.kt)("p",null,"Extending VertiGIS Studio Workflow Server requires administrative access to your on-premises installation of workflow."),(0,i.kt)("h2",{id:"development-environment"},"Development Environment"),(0,i.kt)("p",null,"Visual Studio 2022 is the only officially supported development environment for extending VertiGIS Studio Workflow Server."),(0,i.kt)("h2",{id:"setting-up-a-vertigis-studio-workflow-server-extension-project"},"Setting up a VertiGIS Studio Workflow Server Extension Project"),(0,i.kt)("p",null,"Extending VertiGIS Studio Workflow Server requires you to produce a separate assembly with your custom activities, and copy that into your on-premises deployment of VertiGIS Studio Workflow. We first need to set up a project using Visual Studio that references the ",(0,i.kt)("a",{parentName:"p",href:"/docs/workflow/key-concepts#vertigis-studio-workflow-designer-and-runtime"},"workflow runtime"),"."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Launch Microsoft Visual Studio 2022."),(0,i.kt)("li",{parentName:"ol"},"Create a new project of type ",(0,i.kt)("em",{parentName:"li"},"Class Library")," (.NET Standard)",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"You can also create a project of type ",(0,i.kt)("a",{parentName:"li",href:"https://dotnet.microsoft.com/learn/dotnet/what-is-dotnet"},".NET")," to take advantage of its larger feature set. If so, you need to go into the project settings and change the output type to ",(0,i.kt)("inlineCode",{parentName:"li"},"Class Library")))),(0,i.kt)("li",{parentName:"ol"},"Edit the ",(0,i.kt)("inlineCode",{parentName:"li"},".csproj")," file in a text editor and add the ",(0,i.kt)("inlineCode",{parentName:"li"},"CopyLocalLockFileAssemblies")," attribute to the ",(0,i.kt)("inlineCode",{parentName:"li"},"PropertyGroup"),".")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<PropertyGroup>\n    <TargetFramework>netstandard2.1</TargetFramework>\n    <RootNamespace>CustomWorkflow</RootNamespace>\n    // highlight-next-line\n    <CopyLocalLockFileAssemblies>true</CopyLocalLockFileAssemblies>\n</PropertyGroup>\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"This will copy the referenced nuget assemblies to the build output folder, which will be important for later.")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/visualstudio/ide/how-to-add-or-remove-references-by-using-the-reference-manager?view=vs-2019"},"Add a reference")," to the ",(0,i.kt)("inlineCode",{parentName:"li"},"VertiGIS.Workflow.Runtime")," assembly.\nBy default, this is located in",(0,i.kt)("inlineCode",{parentName:"li"},"C:\\Program Files\\VertiGIS\\VertiGIS Studio Workflow\\Deployment\\service"))),(0,i.kt)("admonition",{title:"Important",type:"info"},(0,i.kt)("p",{parentName:"admonition"},".NET Standard projects ",(0,i.kt)("strong",{parentName:"p"},"must")," target .NET Standard 2.1, and .NET projects must target .NET 6.0, or else the assembly will be incompatible with VertiGIS Studio Workflow Server.")),(0,i.kt)(s.default,{mdxType:"SdkLimitationsWarning"}),(0,i.kt)("p",null,"Next, learn how to implement a ",(0,i.kt)("a",{parentName:"p",href:"/docs/workflow/tutorial-server-calculate-logarithm-activity"},"custom activity")," for VertiGIS Studio Workflow Server."),(0,i.kt)("h2",{id:"deploying-vertigis-studio-workflow-server-activities"},"Deploying VertiGIS Studio Workflow Server Activities"),(0,i.kt)("p",null,"For VertiGIS Studio Workflow Server to find your custom activities, you need to copy the build output to a particular folder."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Build the project."),(0,i.kt)("li",{parentName:"ol"},"Find the build output on disk.",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},'In Visual Studio, right-click on your project in Solution Explorer and choose "Open Folder in File Explorer".'),(0,i.kt)("li",{parentName:"ol"},"Open the ",(0,i.kt)("inlineCode",{parentName:"li"},"bin")," folder.\nIf you do not see a",(0,i.kt)("inlineCode",{parentName:"li"},"bin")," folder, it is possible you right-clicked on the solution instead of the project."),(0,i.kt)("li",{parentName:"ol"},"In the ",(0,i.kt)("inlineCode",{parentName:"li"},"bin")," folder, open either ",(0,i.kt)("inlineCode",{parentName:"li"},"Debug")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"Release"),", depending on which build configuration you used."),(0,i.kt)("li",{parentName:"ol"},"In the ",(0,i.kt)("inlineCode",{parentName:"li"},"bin\\Debug")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"bin\\Release")," folder, there will be one final sub-directory which will be ",(0,i.kt)("inlineCode",{parentName:"li"},"netstandard2.1"),"\nor ",(0,i.kt)("inlineCode",{parentName:"li"},"net6.0"),". Open this folder."),(0,i.kt)("li",{parentName:"ol"},"You should now see a number of files including ",(0,i.kt)("inlineCode",{parentName:"li"},"VertiGIS.Workflow.Runtime.dll")," and your own project, such as ",(0,i.kt)("inlineCode",{parentName:"li"},"AssemblyNamespace.dll"),"."))),(0,i.kt)("li",{parentName:"ol"},"Find the ",(0,i.kt)("inlineCode",{parentName:"li"},"CustomAssemblies")," folder on disk.",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"VertiGIS Studio Workflow looks in a folder called ",(0,i.kt)("inlineCode",{parentName:"li"},"CustomAssemblies")," for assemblies that contain custom activities.\nThis is located in the folder that you chose when installing VertiGIS Studio Workflow. The default location is\n",(0,i.kt)("inlineCode",{parentName:"li"},"C:\\Program Files\\VertiGIS\\VertiGIS Studio Workflow\\CustomAssemblies")))),(0,i.kt)("li",{parentName:"ol"},"Copy the relevant files from the build output to the ",(0,i.kt)("inlineCode",{parentName:"li"},"CustomAssemblies")," folder.",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"Copy your project's assembly. (e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"AssemblyNamespace.dll"),")"),(0,i.kt)("li",{parentName:"ol"},"Copy any third-party libraries that your project relies on (these should have been output to the build folder)"),(0,i.kt)("li",{parentName:"ol"},"Copy any other configuration files or resources that your project relies on."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Do not")," copy any files that start with ",(0,i.kt)("inlineCode",{parentName:"li"},"VertiGIS.Workflow.")," They are not required in this folder.")))),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"If you created a .NET Project and see ",(0,i.kt)("inlineCode",{parentName:"p"},"AssemblyNamespace.exe"),", you need to change the project output type to ",(0,i.kt)("inlineCode",{parentName:"p"},"Class Library"),".")),(0,i.kt)("admonition",{title:"Important",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"You may need to stop VertiGIS Studio Workflow Server in IIS in order to copy your copy your custom code.")),(0,i.kt)("h2",{id:"debugging-server-workflow-activities"},"Debugging Server Workflow Activities"),(0,i.kt)("p",null,"You can debug custom VertiGIS Studio Workflow Server activities by attaching to the VertiGIS Studio Workflow Server process from the VertiGIS Studio Workflow extension project you created."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Start Visual Studio 2022 with administrator privileges."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/visualstudio/debugger/debug-multiple-processes?view=vs-2019#BKMK_Attach_to_a_process"},"Attach the debugger")," to the running ",(0,i.kt)("inlineCode",{parentName:"li"},"GeocortexWorkflowServer.exe")," process.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"You may need to check 'show processes from all users' to see it."))),(0,i.kt)("li",{parentName:"ol"},"Set a breakpoint in your custom activity."),(0,i.kt)("li",{parentName:"ol"},"Run your server workflow that uses the custom activity. Your breakpoint should be hit.")),(0,i.kt)("h2",{id:"automating-deployment-of-server-workflow-activities"},"Automating Deployment of Server Workflow Activities"),(0,i.kt)("p",null,"To automate the deployment to VertiGIS Studio Workflow Server, we have to add a post build step to the project that copies the build output."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Locate the ",(0,i.kt)("inlineCode",{parentName:"li"},"Custom Assemblies")," folder in the VertiGIS Studio Workflow Server installation. The default location is ",(0,i.kt)("inlineCode",{parentName:"li"},"C:\\Program Files\\VertiGIS\\VertiGIS Studio Workflow\\CustomAssemblies")),(0,i.kt)("li",{parentName:"ol"},"Create a file ",(0,i.kt)("inlineCode",{parentName:"li"},"excluded_files.txt")," at the root of the project that excludes the appropriate build output files as described in the ",(0,i.kt)("a",{parentName:"li",href:"#deploying-vertigis-studio-workflow-server-activities"},"deployment section"),".")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"VertiGIS.Workflow.Runtime.dll\nVertiGIS.Workflow.Runtime.xml\n")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Edit the post build event in the project properties.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Add a command which copies the build output to the ",(0,i.kt)("inlineCode",{parentName:"li"},"Custom Assemblies")," folder."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},'xcopy "$(OutDir)*" "C:\\Program Files\\VertiGIS\\VertiGIS Studio Workflow\\CustomAssemblies" /Exclude:$(ProjectDir)excludedFiles.txt /y')))),(0,i.kt)("li",{parentName:"ol"},"Run a rebuild and ensure all appropriate files are copied.")),(0,i.kt)("admonition",{title:"Important",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"You may need to stop then restart VertiGIS Studio Workflow Server in order for the post build step to copy your custom code.")),(0,i.kt)("h2",{id:"next-steps"},"Next Steps"),(0,i.kt)("p",null,"Check out the tutorials to learn how to build custom activities for VertiGIS Studio Workflow Server and augment them with third party libraries."),(0,i.kt)(l.Z,{mdxType:"UseCaseContainer"},(0,i.kt)(a.Z,{title:"Implement a Custom Activity",description:"Implement a custom activity for VertiGIS Studio Workflow Server",link:(0,n.Z)("docs/workflow/tutorial-server-calculate-logarithm-activity"),mdxType:"UseCaseCard"}),(0,i.kt)(a.Z,{title:"Reference a Third Party Library",description:"Reference a third party library in custom code.",link:(0,n.Z)("docs/workflow/sdk-server-reference-third-party-library"),mdxType:"UseCaseCard"})))}v.isMDXComponent=!0},8904:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>n,metadata:()=>a,toc:()=>d});var r=o(7462),i=(o(7294),o(3905));const n={},l=void 0,a={unversionedId:"workflow/snippets/sdk-net-limitations-warning",id:"workflow/snippets/sdk-net-limitations-warning",title:"sdk-net-limitations-warning",description:"We recommend that you only implement the IActivityHandler interface examples provided in the Developer Center. These examples have been verified and are provided to help you customize your VertiGIS Studio product to suit your needs. You should not reference other classes and functions from the various VertiGIS Studio Workflow assemblies. Doing so could risk breaking functionality and/or unexpected results as a result of future changes.",source:"@site/docs/workflow/snippets/sdk-net-limitations-warning.mdx",sourceDirName:"workflow/snippets",slug:"/workflow/snippets/sdk-net-limitations-warning",permalink:"/docs/workflow/snippets/sdk-net-limitations-warning",draft:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/workflow/snippets/sdk-net-limitations-warning.mdx",tags:[],version:"current",frontMatter:{}},s={},d=[],u={toc:d},p="wrapper";function c(e){let{components:t,...o}=e;return(0,i.kt)(p,(0,r.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"We recommend that you only implement the ",(0,i.kt)("code",null,"IActivityHandler")," interface examples provided in the Developer Center. These examples have been verified and are provided to help you customize your VertiGIS Studio product to suit your needs. You should not reference other classes and functions from the various VertiGIS Studio Workflow assemblies. Doing so could risk breaking functionality and/or unexpected results as a result of future changes.")))}c.isMDXComponent=!0}}]);