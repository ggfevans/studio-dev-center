"use strict";(globalThis.webpackChunkvertigis_studio_dev_center=globalThis.webpackChunkvertigis_studio_dev_center||[]).push([[5850,3131,3381],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>f});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),m=p(n),u=r,f=m["".concat(l,".").concat(u)]||m[u]||c[u]||a;return n?o.createElement(f,s(s({ref:t},d),{},{components:n})):o.createElement(f,s({ref:t},d))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,s=new Array(a);s[0]=u;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[m]="string"==typeof e?e:r,s[1]=i;for(var p=2;p<a;p++)s[p]=n[p];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(7294),r=n(6010);const a={tabItem:"tabItem_Ymn6"};function s(e){let{children:t,hidden:n,className:s}=e;return o.createElement("div",{role:"tabpanel",className:(0,r.Z)(a.tabItem,s),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>N});var o=n(7462),r=n(7294),a=n(6010),s=n(2466),i=n(6550),l=n(1980),p=n(7392),d=n(12);function m(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:o,default:r}}=e;return{value:t,label:n,attributes:o,default:r}}))}function c(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??m(n);return function(e){const t=(0,p.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function u(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function f(e){let{queryString:t=!1,groupId:n}=e;const o=(0,i.k6)(),a=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l._X)(a),(0,r.useCallback)((e=>{if(!a)return;const t=new URLSearchParams(o.location.search);t.set(a,e),o.replace({...o.location,search:t.toString()})}),[a,o])]}function w(e){const{defaultValue:t,queryString:n=!1,groupId:o}=e,a=c(e),[s,i]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!u({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const o=n.find((e=>e.default))??n[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:t,tabValues:a}))),[l,p]=f({queryString:n,groupId:o}),[m,w]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[o,a]=(0,d.Nk)(n);return[o,(0,r.useCallback)((e=>{n&&a.set(e)}),[n,a])]}({groupId:o}),h=(()=>{const e=l??m;return u({value:e,tabValues:a})?e:null})();(0,r.useLayoutEffect)((()=>{h&&i(h)}),[h]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!u({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);i(e),p(e),w(e)}),[p,w,a]),tabValues:a}}var h=n(2389);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function b(e){let{className:t,block:n,selectedValue:i,selectValue:l,tabValues:p}=e;const d=[],{blockElementScrollPositionUntilNextRender:m}=(0,s.o5)(),c=e=>{const t=e.currentTarget,n=d.indexOf(t),o=p[n].value;o!==i&&(m(t),l(o))},u=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=d.indexOf(e.currentTarget)+1;t=d[n]??d[0];break}case"ArrowLeft":{const n=d.indexOf(e.currentTarget)-1;t=d[n]??d[d.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":n},t)},p.map((e=>{let{value:t,label:n,attributes:s}=e;return r.createElement("li",(0,o.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>d.push(e),onKeyDown:u,onClick:c},s,{className:(0,a.Z)("tabs__item",g.tabItem,s?.className,{"tabs__item--active":i===t})}),n??t)})))}function y(e){let{lazy:t,children:n,selectedValue:o}=e;const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=a.find((e=>e.props.value===o));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},a.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==o}))))}function v(e){const t=w(e);return r.createElement("div",{className:(0,a.Z)("tabs-container",g.tabList)},r.createElement(b,(0,o.Z)({},e,t)),r.createElement(y,(0,o.Z)({},e,t)))}function N(e){const t=(0,h.Z)();return r.createElement(v,(0,o.Z)({key:String(t)},e))}},5858:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(9960),r=n(7294),a=n(6010);const s={root:"root_Uwqo"};function i(e){let{title:t,description:n,link:i}=e;return r.createElement("div",{className:(0,a.Z)("card-demo",s.root)},r.createElement("div",{className:"card"},r.createElement("div",{className:"card__header"},r.createElement("h3",null,t)),r.createElement("div",{className:"card__body"},r.createElement("p",null,n)),r.createElement("div",{className:"card__footer"},r.createElement(o.Z,{className:"button button--secondary button--block",to:i},"Get Started"))))}},7467:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(7294);const r={root:"root_vxd5"};function a(e){let{children:t}=e;return o.createElement("div",{className:r.root},t)}},7840:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>c,frontMatter:()=>a,metadata:()=>i,toc:()=>p});var o=n(7462),r=(n(7294),n(3905));const a={},s=void 0,i={unversionedId:"web/snippets/framework-components",id:"web/snippets/framework-components",title:"framework-components",description:"This example uses VertiGIS Studio Web layout components",source:"@site/docs/web/snippets/framework-components.mdx",sourceDirName:"web/snippets",slug:"/web/snippets/framework-components",permalink:"/docs/web/snippets/framework-components",draft:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/web/snippets/framework-components.mdx",tags:[],version:"current",frontMatter:{}},l={},p=[],d={toc:p},m="wrapper";function c(e){let{components:t,...n}=e;return(0,r.kt)(m,(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"This example uses VertiGIS Studio Web layout components")))}c.isMDXComponent=!0},9190:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>c,frontMatter:()=>a,metadata:()=>i,toc:()=>p});var o=n(7462),r=(n(7294),n(3905));const a={},s=void 0,i={unversionedId:"web/snippets/prereqs-custom-code",id:"web/snippets/prereqs-custom-code",title:"prereqs-custom-code",description:"-   Download and setup the VertiGIS Studio Web SDK.",source:"@site/docs/web/snippets/prereqs-custom-code.mdx",sourceDirName:"web/snippets",slug:"/web/snippets/prereqs-custom-code",permalink:"/docs/web/snippets/prereqs-custom-code",draft:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/web/snippets/prereqs-custom-code.mdx",tags:[],version:"current",frontMatter:{}},l={},p=[],d={toc:p},m="wrapper";function c(e){let{components:t,...n}=e;return(0,r.kt)(m,(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Download and setup the ",(0,r.kt)("a",{parentName:"li",href:"/docs/web/sdk-overview"},"VertiGIS Studio Web SDK"),"."),(0,r.kt)("li",{parentName:"ul"},"Check out the ",(0,r.kt)("a",{parentName:"li",href:"/docs/web/sdk-deployment#uploading-custom-code-to-an-app"},"deployment instructions")," to learn more about deploying custom code to a VertiGIS Studio Web App.")))}c.isMDXComponent=!0},3166:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>w,contentTitle:()=>u,default:()=>y,frontMatter:()=>c,metadata:()=>f,toc:()=>h});var o=n(7462),r=(n(7294),n(3905)),a=n(4996),s=n(5858),i=n(7467),l=n(4866),p=n(5162),d=n(7840),m=n(9190);const c={title:"Pull Component Data from App Config",description:"VertiGIS Studio Web - Learn how to make a component participate in app config."},u=void 0,f={unversionedId:"web/tutorial-implement-component-participate-app-config",id:"web/tutorial-implement-component-participate-app-config",title:"Pull Component Data from App Config",description:"VertiGIS Studio Web - Learn how to make a component participate in app config.",source:"@site/docs/web/tutorial-implement-component-participate-app-config.mdx",sourceDirName:"web",slug:"/web/tutorial-implement-component-participate-app-config",permalink:"/docs/web/tutorial-implement-component-participate-app-config",draft:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/web/tutorial-implement-component-participate-app-config.mdx",tags:[],version:"current",frontMatter:{title:"Pull Component Data from App Config",description:"VertiGIS Studio Web - Learn how to make a component participate in app config."},sidebar:"web",previous:{title:"Import the MapModel into a Component",permalink:"/docs/web/tutorial-import-map-model"},next:{title:"Subscribe to an Existing Event",permalink:"/docs/web/tutorial-events-subscribe"}},w={},h=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Starting Point",id:"starting-point",level:2},{value:"Define the Configurable Properties",id:"define-the-configurable-properties",level:2},{value:"Participate in the Configuration",id:"participate-in-the-configuration",level:2},{value:"Consume the Configuration in the Component",id:"consume-the-configuration-in-the-component",level:2},{value:"Complete Example",id:"complete-example",level:2},{value:"Next Steps",id:"next-steps",level:2}],g={toc:h},b="wrapper";function y(e){let{components:t,...n}=e;return(0,r.kt)(b,(0,o.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"VertiGIS Studio Web has a powerful ",(0,r.kt)("a",{parentName:"p",href:"/docs/web/configuration-app-config-getting-started"},"app configuration")," model which can be used to easily change the behavior of an application without modifying custom code. Using app config to power a components behavior increases its reusability and customizability."),(0,r.kt)("p",null,"By the end of this article, you'll have the knowledge to build a component that displays relevant news items at the top of your map. These news items will be populated from config, along with a value that tells the news component whether or not to be visible by default."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)(m.default,{mdxType:"PrereqsCustomCodeSnippet"}),(0,r.kt)("h2",{id:"starting-point"},"Starting Point"),(0,r.kt)("p",null,"We are going to add configuration to a custom component that displays news items. This component currently is following bad practices and does not treat the model as the source of truth for its data. We are going to move the ",(0,r.kt)("inlineCode",{parentName:"p"},"newsItems")," list to a configurable property on the model, and add a new configurable property, ",(0,r.kt)("inlineCode",{parentName:"p"},"hideOnStartup"),"."),(0,r.kt)(d.default,{mdxType:"FrameworkComponentsSnippet"}),(0,r.kt)(l.Z,{defaultValue:"component",values:[{label:"Component",value:"component"},{label:"Empty Model",value:"model"},{label:"CSS",value:"css"},{label:"Component Index",value:"index"},{label:"Registration",value:"registration"},{label:"Layout",value:"layout"},{label:"App Config",value:"config"}],mdxType:"Tabs"},(0,r.kt)(p.Z,{value:"component",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/components/NewsFeed/NewsFeed.tsx"',title:'"src/components/NewsFeed/NewsFeed.tsx"'},'import React, { useState } from "react";\nimport { LayoutElement } from "@vertigis/web/components";\nimport List from "@vertigis/web/ui/List";\nimport ListItem from "@vertigis/web/ui/ListItem";\nimport TitleBar from "@vertigis/web/ui/TitleBar";\nimport Button from "@vertigis/web/ui/Button";\nimport DialogActions from "@vertigis/web/ui/DialogActions";\nimport "./NewsFeed.css";\n\nexport default function NewsFeed(props) {\n    const [hidden, setHidden] = useState(false);\n\n    const newsItems: string[] = [\n        "New fire hydrant installed at Main and 5th.",\n        "Pipe burst at 4th and Broadview",\n        "Fire hydrant reported as needs maintenance by citizen.",\n    ];\n\n    return (\n        <LayoutElement {...props}>\n            <List className="news-item-list">\n                <DialogActions>\n                    <TitleBar text="Recent News"></TitleBar>\n                    {hidden && (\n                        <Button onClick={() => setHidden(false)}>\n                            Show News\n                        </Button>\n                    )}\n                    {!hidden && (\n                        <Button onClick={() => setHidden(true)}>\n                            Hide News\n                        </Button>\n                    )}\n                </DialogActions>\n                {!hidden &&\n                    newsItems.map((news, idx) => (\n                        <ListItem key={idx}>{news}</ListItem>\n                    ))}\n            </List>\n        </LayoutElement>\n    );\n}\n'))),(0,r.kt)(p.Z,{value:"model",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/components/NewsFeed/NewsFeedModel.ts"',title:'"src/components/NewsFeed/NewsFeedModel.ts"'},'import {\n    ComponentModelBase,\n    serializable,\n} from "@vertigis/web/models";\n\n@serializable\nclass NewsFeedModel extends ComponentModelBase {}\n\nexport default NewsFeedModel;\n'))),(0,r.kt)(p.Z,{value:"css",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-css",metastring:'title="src/components/NewsFeed/NewsFeed.css"',title:'"src/components/NewsFeed/NewsFeed.css"'},".news-item-list {\n    max-height: 200px;\n    overflow: scroll;\n}\n"))),(0,r.kt)(p.Z,{value:"index",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/components/NewsFeed/index.ts"',title:'"src/components/NewsFeed/index.ts"'},'export { default } from "./NewsFeed";\nexport { default as NewsFeedModel } from "./NewsFeedModel";\n'))),(0,r.kt)(p.Z,{value:"registration",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/index.ts"',title:'"src/index.ts"'},'import NewsFeed, { NewsFeedModel } from "./components/NewsFeed";\nimport { LibraryRegistry } from "@vertigis/web/config";\n\nexport default function (registry: LibraryRegistry) {\n    registry.registerComponent({\n        name: "news-feed",\n        namespace: "your.custom.namespace",\n        getComponentType: () => NewsFeed,\n        itemType: "news-feed-model",\n        title: "News Feed",\n    });\n    registry.registerModel({\n        getModel: (config) => new NewsFeedModel(config),\n        itemType: "news-feed-model",\n    });\n}\n'))),(0,r.kt)(p.Z,{value:"layout",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml",metastring:'title="app/layout.xml"',title:'"app/layout.xml"'},'<?xml version="1.0" encoding="UTF-8"?>\n<layout xmlns="https://geocortex.com/layout/v1" xmlns:custom="your.custom.namespace">\n    <map>\n        <custom:news-feed slot="top-center"/>\n    </map>\n</layout>\n'))),(0,r.kt)(p.Z,{value:"config",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="app/app.json"',title:'"app/app.json"'},'{\n    "schemaVersion": "1.0",\n    "items": []\n}\n')))),(0,r.kt)("h2",{id:"define-the-configurable-properties"},"Define the Configurable Properties"),(0,r.kt)("p",null,"First, we need to create a ",(0,r.kt)("inlineCode",{parentName:"p"},"NewsFeedModelProperties")," interface which we use to inform the ",(0,r.kt)("inlineCode",{parentName:"p"},"NewsFeedModel")," about which properties it should populate from configuration."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import {\n    ComponentModelBase,\n    serializable,\n    ComponentModelProperties,\n    PropertyDefs,\n} from "@vertigis/web/models";\nimport Collection from "esri/core/Collection";\n\ninterface NewsFeedModelProperties extends ComponentModelProperties {\n    newsItems?: Collection<string>;\n    hideOnStartup?: boolean;\n}\n\n@serializable\nexport default class NewsFeedModel extends ComponentModelBase<NewsFeedModelProperties> {\n    /**\n     * Array of items to display in the news feed\n     */\n    newsItems: Collection<string> = new Collection<string>();\n\n    /**\n     * Whether or not the news ticker is initially hidden\n     */\n    hideOnStartup: boolean;\n}\n')),(0,r.kt)("h2",{id:"participate-in-the-configuration"},"Participate in the Configuration"),(0,r.kt)("p",null,"Next, we have to inform VertiGIS Studio Web about how to serialize and deserialize these properties between the app config and the model, as well as provide default values. We do this by ",(0,r.kt)("a",{parentName:"p",href:"/docs/web/sdk-serializable-properties"},"implementing the ",(0,r.kt)("inlineCode",{parentName:"a"},"_getSerializableProperties")," method"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/components/NewsFeed/NewsFeedModel.ts"',title:'"src/components/NewsFeed/NewsFeedModel.ts"'},'import {\n    ComponentModelBase,\n    serializable,\n    ComponentModelProperties,\n    PropertyDefs,\n} from "@vertigis/web/models";\nimport Collection from "esri/core/Collection";\n\ninterface NewsFeedModelProperties extends ComponentModelProperties {\n    newsItems?: string[];\n    hideOnStartup?: boolean;\n}\n\n@serializable\nexport default class NewsFeedModel extends ComponentModelBase<NewsFeedModelProperties> {\n    /**\n     * Array of items to display in the news feed\n     */\n    newsItems: Collection<string> = new Collection<string>();\n\n    /**\n     * Whether or not the news ticker is hidden\n     */\n    hideOnStartup: boolean;\n\n    // highlight-start\n    protected _getSerializableProperties(): PropertyDefs<NewsFeedModelProperties> {\n        const props = super._getSerializableProperties();\n        return {\n            ...props,\n            newsItems: {\n                serializeModes: ["initial"],\n                default: ["No news."],\n                serialize: () => this.newsItems.toArray(),\n                deserialize: (newsItems) => {\n                    newsItems.forEach((newsItem) =>\n                        this.newsItems.add(newsItem)\n                    );\n                },\n            },\n            hideOnStartup: {\n                serializeModes: ["initial"],\n                default: false,\n            },\n        };\n    }\n    // highlight-end\n}\n')),(0,r.kt)("h2",{id:"consume-the-configuration-in-the-component"},"Consume the Configuration in the Component"),(0,r.kt)("p",null,"Finally, we need to update the ",(0,r.kt)("inlineCode",{parentName:"p"},"NewsFeed")," component to treat the model as its single source of truth for data. First, we update the props passed into the component to include the relevant model."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"export interface NewsFeedProps extends LayoutElementProperties<NewsFeedModel> {}\n\nexport default function NewsFeed(props: NewsFeedProps) {\n    ...\n}\n")),(0,r.kt)("p",null,"The model will initially populated with values from configuration or defaults. The component can use ",(0,r.kt)("inlineCode",{parentName:"p"},"props.model")," values to set the initial state, but we also want to update the model and re-render on model changes. Since the data state is contained within the model, we can't use the ",(0,r.kt)("inlineCode",{parentName:"p"},"useState")," React pattern."),(0,r.kt)("p",null,"To respond to model changes, we can do the following."),(0,r.kt)("p",null,"Upon user interaction that affects state,"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The component updates the model values."),(0,r.kt)("li",{parentName:"ol"},"The component listens for changes on the model values and re-renders with the ",(0,r.kt)("inlineCode",{parentName:"li"},"useWatchAndRerender")," function.")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Learn more about the ",(0,r.kt)("a",{parentName:"p",href:"/docs/web/sdk-components-hooks"},"helper React Hook functions")," like ",(0,r.kt)("inlineCode",{parentName:"p"},"useWatchAndRerender"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'export default function NewsFeed(props: NewsFeedProps) {\n    const { model } = props;\n\n    useWatchAndRerender(model, "newsItems");\n    ...\n}\n')),(0,r.kt)("h2",{id:"complete-example"},"Complete Example"),(0,r.kt)("p",null,"Following is a complete example where news items are configured in the ",(0,r.kt)("inlineCode",{parentName:"p"},"app.json"),", populated into the ",(0,r.kt)("inlineCode",{parentName:"p"},"NewsFeedModel")," and finally consumed and presented by the ",(0,r.kt)("inlineCode",{parentName:"p"},"NewsFeed")," component."),(0,r.kt)(l.Z,{defaultValue:"component",values:[{label:"Component",value:"component"},{label:"Model",value:"model"},{label:"Css",value:"css"},{label:"Layout",value:"layout"},{label:"App Config",value:"config"},{label:"Component Export",value:"newsFeedIndex"},{label:"Registration",value:"index"},{label:"UI",value:"ui"}],mdxType:"Tabs"},(0,r.kt)(p.Z,{value:"component",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/components/NewsFeed/NewsFeed.tsx"',title:'"src/components/NewsFeed/NewsFeed.tsx"'},'import React, { useState } from "react";\nimport {\n    LayoutElement,\n    LayoutElementProperties,\n} from "@vertigis/web/components";\nimport { useWatchAndRerender } from "@vertigis/web/ui";\nimport List from "@vertigis/web/ui/List";\nimport ListItem from "@vertigis/web/ui/ListItem";\nimport TitleBar from "@vertigis/web/ui/TitleBar";\nimport Button from "@vertigis/web/ui/Button";\nimport DialogActions from "@vertigis/web/ui/DialogActions";\nimport "./NewsFeed.css";\nimport { NewsFeedModel } from ".";\n\nexport interface NewsFeedProps\n    extends LayoutElementProperties<NewsFeedModel> {}\n\nexport default function NewsFeed(props: NewsFeedProps) {\n    const { model } = props;\n    const { hidden, setHidden } = useState(model.hideOnStartup);\n\n    /**\n     * The use watch function handles observing a property on the model,\n     * re-rendering on change, and cleaning up the subscription handle on unmount.\n     * This helper function allows you to use the model as your component state.\n     */\n    // highlight-start\n    useWatchAndRerender(model, "newsItems");\n    // highlight-end\n\n    return (\n        <LayoutElement {...props}>\n            <List className="news-item-list">\n                <DialogActions>\n                    <TitleBar text="Recent News"></TitleBar>\n                    // highlight-start\n                    {model.hidden && (\n                        <Button\n                            onClick={() => (model.hidden = false)}\n                        >\n                            Show News\n                        </Button>\n                    )}\n                    {!model.hidden && (\n                        <Button onClick={() => (model.hidden = true)}>\n                            Hide News\n                        </Button>\n                    )}\n                    // highlight-end\n                </DialogActions>\n                {!model.hidden &&\n                    model.newsItems\n                        .map((news, idx) => (\n                            <ListItem key={idx}>{news}</ListItem>\n                        ))\n                        .toArray()}\n            </List>\n        </LayoutElement>\n    );\n}\n'))),(0,r.kt)(p.Z,{value:"model",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/components/NewsFeed/NewsFeedModel.ts"',title:'"src/components/NewsFeed/NewsFeedModel.ts"'},'import {\n    ComponentModelBase,\n    serializable,\n    ComponentModelProperties,\n    PropertyDefs,\n} from "@vertigis/web/models";\nimport Collection from "esri/core/Collection";\n\ninterface NewsFeedModelProperties extends ComponentModelProperties {\n    newsItems?: string[];\n    hideOnStartup?: boolean;\n}\n\n@serializable\nexport default class NewsFeedModel extends ComponentModelBase<NewsFeedModelProperties> {\n    /**\n     * Array of items to display in the news feed\n     */\n    newsItems: Collection<string> = new Collection<string>();\n\n    /**\n     * Whether or not the news ticker is hidden\n     */\n    hideOnStartup: boolean;\n\n    protected _getSerializableProperties(): PropertyDefs<NewsFeedModelProperties> {\n        const props = super._getSerializableProperties();\n        return {\n            ...props,\n            newsItems: {\n                serializeModes: ["initial"],\n                default: ["No news."],\n                serialize: () => this.newsItems.toArray(),\n                deserialize: (newsItems) => {\n                    newsItems.forEach((newsItem) =>\n                        this.newsItems.add(newsItem)\n                    );\n                },\n            },\n            hideOnStartup: {\n                serializeModes: ["initial"],\n                default: false,\n            },\n        };\n    }\n}\n'))),(0,r.kt)(p.Z,{value:"css",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-css",metastring:'title="src/components/NewsFeed/NewsFeed.css"',title:'"src/components/NewsFeed/NewsFeed.css"'},".news-item-list {\n    max-height: 200px;\n    overflow: scroll;\n}\n"))),(0,r.kt)(p.Z,{value:"layout",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml",metastring:'title="app/layout.xml"',title:'"app/layout.xml"'},'<?xml version="1.0" encoding="UTF-8"?>\n<layout xmlns="https://geocortex.com/layout/v1" xmlns:custom="your.custom.namespace">\n    <map>\n        // highlight-next-line\n        <custom:news-feed slot="top-center" config="default"/>\n    </map>\n</layout>\n'))),(0,r.kt)(p.Z,{value:"config",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="app/app.json"',title:'"app/app.json"'},'{\n    "schemaVersion": "1.0",\n    "items": [\n        // highlight-start\n        {\n            "$type": "news-feed-model",\n            "id": "default",\n            "newsItems": [\n                "New fire hydrant installed at Main and 5th.",\n                "Pipe burst at 4th and Broadview",\n                "Fire hydrant reported as needs maintenance by citizen."\n            ],\n            "hideOnStartup": true\n        }\n        // highlight-end\n    ]\n}\n'))),(0,r.kt)(p.Z,{value:"newsFeedIndex",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/components/NewsFeed/index.ts"',title:'"src/components/NewsFeed/index.ts"'},'export { default } from "./NewsFeed";\nexport { default as NewsFeedModel } from "./NewsFeedModel";\n'))),(0,r.kt)(p.Z,{value:"index",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/index.ts"',title:'"src/index.ts"'},'import Test, { TestModel } from "./components/Test";\nimport NewsFeed, { NewsFeedModel } from "./components/NewsFeed";\nimport { LibraryRegistry } from "@vertigis/web/config";\n\nconst LAYOUT_NAMESPACE = "custom.foo";\n\nexport default function (registry: LibraryRegistry) {\n    registry.registerComponent({\n        name: "news-feed",\n        namespace: "your.custom.namespace",\n        getComponentType: () => NewsFeed,\n        // highlight-next-line\n        itemType: "news-feed-model",\n        title: "News Feed",\n    });\n    registry.registerModel({\n        getModel: (config) => new NewsFeedModel(config),\n        // highlight-next-line\n        itemType: "news-feed-model",\n    });\n}\n'))),(0,r.kt)(p.Z,{value:"ui",mdxType:"TabItem"},(0,r.kt)("img",{src:(0,a.Z)("img/web-component-config-example.png")}))),(0,r.kt)("h2",{id:"next-steps"},"Next Steps"),(0,r.kt)(i.Z,{mdxType:"UseCaseContainer"},(0,r.kt)(s.Z,{title:"Check out the Component Reference",description:"Take a deep dive into components in the VertiGIS Studio Web SDK",link:(0,a.Z)("docs/web/sdk-components-reference"),mdxType:"UseCaseCard"})))}y.isMDXComponent=!0}}]);