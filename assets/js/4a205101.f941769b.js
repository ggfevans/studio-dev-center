"use strict";(globalThis.webpackChunkvertigis_studio_dev_center=globalThis.webpackChunkvertigis_studio_dev_center||[]).push([[394,3381],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=o.createContext({}),m=function(e){var t=o.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=m(e.components);return o.createElement(i.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=m(n),d=a,h=c["".concat(i,".").concat(d)]||c[d]||u[d]||r;return n?o.createElement(h,s(s({ref:t},p),{},{components:n})):o.createElement(h,s({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,s=new Array(r);s[0]=d;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l[c]="string"==typeof e?e:a,s[1]=l;for(var m=2;m<r;m++)s[m]=n[m];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(7294),a=n(6010);const r={tabItem:"tabItem_Ymn6"};function s(e){let{children:t,hidden:n,className:s}=e;return o.createElement("div",{role:"tabpanel",className:(0,a.Z)(r.tabItem,s),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>C});var o=n(7462),a=n(7294),r=n(6010),s=n(2466),l=n(6550),i=n(1980),m=n(7392),p=n(12);function c(e){return function(e){return a.Children.map(e,(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:o,default:a}}=e;return{value:t,label:n,attributes:o,default:a}}))}function u(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=t??c(n);return function(e){const t=(0,m.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function d(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:n}=e;const o=(0,l.k6)(),r=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,i._X)(r),(0,a.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(o.location.search);t.set(r,e),o.replace({...o.location,search:t.toString()})}),[r,o])]}function b(e){const{defaultValue:t,queryString:n=!1,groupId:o}=e,r=u(e),[s,l]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const o=n.find((e=>e.default))??n[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:t,tabValues:r}))),[i,m]=h({queryString:n,groupId:o}),[c,b]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[o,r]=(0,p.Nk)(n);return[o,(0,a.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:o}),f=(()=>{const e=i??c;return d({value:e,tabValues:r})?e:null})();(0,a.useLayoutEffect)((()=>{f&&l(f)}),[f]);return{selectedValue:s,selectValue:(0,a.useCallback)((e=>{if(!d({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),m(e),b(e)}),[m,b,r]),tabValues:r}}var f=n(2389);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function y(e){let{className:t,block:n,selectedValue:l,selectValue:i,tabValues:m}=e;const p=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.o5)(),u=e=>{const t=e.currentTarget,n=p.indexOf(t),o=m[n].value;o!==l&&(c(t),i(o))},d=e=>{let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const n=p.indexOf(e.currentTarget)+1;t=p[n]??p[0];break}case"ArrowLeft":{const n=p.indexOf(e.currentTarget)-1;t=p[n]??p[p.length-1];break}}t?.focus()};return a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t)},m.map((e=>{let{value:t,label:n,attributes:s}=e;return a.createElement("li",(0,o.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:e=>p.push(e),onKeyDown:d,onClick:u},s,{className:(0,r.Z)("tabs__item",v.tabItem,s?.className,{"tabs__item--active":l===t})}),n??t)})))}function g(e){let{lazy:t,children:n,selectedValue:o}=e;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===o));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return a.createElement("div",{className:"margin-top--md"},r.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==o}))))}function w(e){const t=b(e);return a.createElement("div",{className:(0,r.Z)("tabs-container",v.tabList)},a.createElement(y,(0,o.Z)({},e,t)),a.createElement(g,(0,o.Z)({},e,t)))}function C(e){const t=(0,f.Z)();return a.createElement(w,(0,o.Z)({key:String(t)},e))}},5858:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(9960),a=n(7294),r=n(6010);const s={root:"root_Uwqo"};function l(e){let{title:t,description:n,link:l}=e;return a.createElement("div",{className:(0,r.Z)("card-demo",s.root)},a.createElement("div",{className:"card"},a.createElement("div",{className:"card__header"},a.createElement("h3",null,t)),a.createElement("div",{className:"card__body"},a.createElement("p",null,n)),a.createElement("div",{className:"card__footer"},a.createElement(o.Z,{className:"button button--secondary button--block",to:l},"Get Started"))))}},7467:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(7294);const a={root:"root_vxd5"};function r(e){let{children:t}=e;return o.createElement("div",{className:a.root},t)}},9190:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>m});var o=n(7462),a=(n(7294),n(3905));const r={},s=void 0,l={unversionedId:"web/snippets/prereqs-custom-code",id:"web/snippets/prereqs-custom-code",title:"prereqs-custom-code",description:"-   Download and setup the VertiGIS Studio Web SDK.",source:"@site/docs/web/snippets/prereqs-custom-code.mdx",sourceDirName:"web/snippets",slug:"/web/snippets/prereqs-custom-code",permalink:"/docs/web/snippets/prereqs-custom-code",draft:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/web/snippets/prereqs-custom-code.mdx",tags:[],version:"current",frontMatter:{}},i={},m=[],p={toc:m},c="wrapper";function u(e){let{components:t,...n}=e;return(0,a.kt)(c,(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Download and setup the ",(0,a.kt)("a",{parentName:"li",href:"/docs/web/sdk-overview"},"VertiGIS Studio Web SDK"),"."),(0,a.kt)("li",{parentName:"ul"},"Check out the ",(0,a.kt)("a",{parentName:"li",href:"/docs/web/sdk-deployment#uploading-custom-code-to-an-app"},"deployment instructions")," to learn more about deploying custom code to a VertiGIS Studio Web App.")))}u.isMDXComponent=!0},8793:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>u,default:()=>y,frontMatter:()=>c,metadata:()=>d,toc:()=>b});var o=n(7462),a=(n(7294),n(3905)),r=n(4996),s=n(5858),l=n(7467),i=n(4866),m=n(5162),p=n(9190);const c={title:"Import the MapModel into a Component",description:"VertiGIS Studio Web - Learn how to interact with the map in a custom component"},u=void 0,d={unversionedId:"web/tutorial-import-map-model",id:"web/tutorial-import-map-model",title:"Import the MapModel into a Component",description:"VertiGIS Studio Web - Learn how to interact with the map in a custom component",source:"@site/docs/web/tutorial-import-map-model.mdx",sourceDirName:"web",slug:"/web/tutorial-import-map-model",permalink:"/docs/web/tutorial-import-map-model",draft:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/web/tutorial-import-map-model.mdx",tags:[],version:"current",frontMatter:{title:"Import the MapModel into a Component",description:"VertiGIS Studio Web - Learn how to interact with the map in a custom component"},sidebar:"web",previous:{title:"Build a Custom Component with UI",permalink:"/docs/web/tutorial-implement-component-with-ui"},next:{title:"Pull Component Data from App Config",permalink:"/docs/web/tutorial-implement-component-participate-app-config"}},h={},b=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Create a Custom Component With a Model",id:"create-a-custom-component-with-a-model",level:2},{value:"Inject the Map Model into the Component",id:"inject-the-map-model-into-the-component",level:2},{value:"Use the Map Model to Add a New Graphics Layer",id:"use-the-map-model-to-add-a-new-graphics-layer",level:2},{value:"Live Sample",id:"live-sample",level:2},{value:"Next Steps",id:"next-steps",level:2}],f={toc:b},v="wrapper";function y(e){let{components:t,...n}=e;return(0,a.kt)(v,(0,o.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Custom components can already interface with much of the functionality in VertiGIS Studio Web through commands and operations. However, sometimes more direct access to the data structures that power components is needed."),(0,a.kt)("p",null,"This article will teach you how to inject the Map model into a custom component so you can directly access the Esri Map object and add a graphics layer to it."),(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)(p.default,{mdxType:"PrereqsCustomCodeSnippet"}),(0,a.kt)("h2",{id:"create-a-custom-component-with-a-model"},"Create a Custom Component With a Model"),(0,a.kt)("p",null,"First, we will create a custom component that has an associated model."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"To learn more about registering and using a component in the layout, check out ",(0,a.kt)("a",{parentName:"p",href:"/docs/web/sdk-components-reference"},"the component reference"))),(0,a.kt)(i.Z,{defaultValue:"component",values:[{label:"Component",value:"component"},{label:"Model",value:"model"},{label:"Layout",value:"layout"}],mdxType:"Tabs"},(0,a.kt)(m.Z,{value:"component",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/components/CustomComponent/CustomComponent.tsx"',title:'"src/components/CustomComponent/CustomComponent.tsx"'},'import React from "react";\nimport {\n    LayoutElement,\n    LayoutElementProperties,\n} from "@vertigis/web/components";\nimport Button from "@vertigis/web/ui/Button";\nimport { CustomModel } from ".";\n\nexport default function CustomComponent(\n    props: LayoutElementProperties<CustomModel>\n) {\n    return (\n        <LayoutElement {...props}>\n            <Button onClick={() => props.model.addGraphic()}>\n                Add a Graphic to the Map\n            </Button>\n        </LayoutElement>\n    );\n}\n'))),(0,a.kt)(m.Z,{value:"model",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/components/CustomComponent/CustomModel.ts"',title:'"src/components/CustomComponent/CustomModel.ts"'},'import {\n    ComponentModelBase,\n    serializable,\n} from "@vertigis/web/models";\n\n@serializable\nexport default class CustomModel extends ComponentModelBase {\n    addGraphic() {\n        throw new Error("Not yet implemented.");\n    }\n}\n'))),(0,a.kt)(m.Z,{value:"layout",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml",metastring:'title="app/layout.xml"',title:'"app/layout.xml"'},'<?xml version="1.0" encoding="utf-8" ?>\n<layout xmlns="https://geocortex.com/layout/v1" xmlns:custom="your.custom.namespace">\n    <map>\n        <custom:custom-component slot="top-center"/>\n    </map>\n</layout>\n')))),(0,a.kt)("h2",{id:"inject-the-map-model-into-the-component"},"Inject the Map Model into the Component"),(0,a.kt)("p",null,"Next, we can inject the Map model, which is the type ",(0,a.kt)("inlineCode",{parentName:"p"},"MapExtension"),", into the component using the ",(0,a.kt)("a",{parentName:"p",href:"/docs/web/sdk-components-interactions#interacting-with-components-through-models"},"model injection")," pattern."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},'\n@serializable\nexport default class CustomModel extends ComponentModelBase {\n    // highlight-start\n    @importModel("map-extension")\n    mapExtension: MapExtension | undefined;\n    // highlight-end\n    ...\n}\n')),(0,a.kt)("h2",{id:"use-the-map-model-to-add-a-new-graphics-layer"},"Use the Map Model to Add a New Graphics Layer"),(0,a.kt)("p",null,"Finally, we can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"MapExtension")," to add a custom graphics layer to the ",(0,a.kt)("a",{parentName:"p",href:"https://developers.arcgis.com/javascript/latest/api-reference/esri-Map.html"},"ArcGIS Map object"),"."),(0,a.kt)(i.Z,{defaultValue:"component",values:[{label:"Component",value:"component"},{label:"Model",value:"model"},{label:"UI",value:"ui"}],mdxType:"Tabs"},(0,a.kt)(m.Z,{value:"component",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/components/CustomComponent/CustomComponent.tsx"',title:'"src/components/CustomComponent/CustomComponent.tsx"'},'import React from "react";\nimport {\n    LayoutElement,\n    LayoutElementProperties,\n} from "@vertigis/web/components";\nimport Button from "@vertigis/web/ui/Button";\nimport { CustomModel } from ".";\n\nexport default function CustomComponent(\n    props: LayoutElementProperties<CustomModel>\n) {\n    return (\n        <LayoutElement {...props}>\n            <Button onClick={() => props.model.addGraphic()}>\n                Add a Graphic to the Map\n            </Button>\n        </LayoutElement>\n    );\n}\n'))),(0,a.kt)(m.Z,{value:"model",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/components/CustomComponent/CustomModel.ts"',title:'"src/components/CustomComponent/CustomModel.ts"'},'import {\n    ComponentModelBase,\n    serializable,\n    importModel,\n} from "@vertigis/web/models";\nimport { MapExtension } from "@vertigis/arcgis-extensions/mapping/MapExtension";\nimport Graphic from "esri/Graphic";\nimport GraphicsLayer from "esri/layers/GraphicsLayer";\nimport { Polygon } from "esri/geometry";\nimport { SimpleFillSymbol } from "esri/symbols";\n\n@serializable\nexport default class CustomModel extends ComponentModelBase {\n    @importModel("map-extension")\n    mapExtension: MapExtension | undefined;\n\n    // based on https://developers.arcgis.com/javascript/latest/sample-code/sandbox/index.html?sample=intro-graphics\n    triangleGraphic = new GraphicsLayer({\n        graphics: [\n            new Graphic({\n                symbol: new SimpleFillSymbol({ color: "orange" }),\n                geometry: new Polygon({\n                    rings: [\n                        [\n                            [-64.78, 32.3],\n                            [-66.07, 18.45],\n                            [-80.21, 25.78],\n                            [-64.78, 32.3],\n                        ],\n                    ],\n                }),\n            }),\n        ],\n    });\n\n    addGraphic() {\n        if (this.mapExtension) {\n            const esriMap = this.mapExtension.map;\n            esriMap.add(this.triangleGraphic);\n        } else {\n            console.error(\n                "Could not add graphic to map, as no map model was imported into the \'CustomModel\'."\n            );\n        }\n    }\n}\n'))),(0,a.kt)(m.Z,{value:"ui",mdxType:"TabItem"},(0,a.kt)("img",{src:(0,r.Z)("img/web-add-graphics-layer-component.png")}))),(0,a.kt)("h2",{id:"live-sample"},"Live Sample"),(0,a.kt)("p",null,"Check out a ",(0,a.kt)("a",{parentName:"p",href:"https://vertigis-web-samples.netlify.app/embedded-map"},"live SDK sample")," that demonstrates injecting the map model into a component."),(0,a.kt)("h2",{id:"next-steps"},"Next Steps"),(0,a.kt)(l.Z,{mdxType:"UseCaseContainer"},(0,a.kt)(s.Z,{title:"Learn more about Component Interactions",description:"Learn more about how components interact with each other through models and services",link:(0,r.Z)("docs/web/sdk-components-interactions"),mdxType:"UseCaseCard"}),(0,a.kt)(s.Z,{title:"Learn how Components are Bound to Models in the Layout",description:"Learn how layout structure can be used to bind components to their required models",link:(0,r.Z)("docs/web/configuration-advanced-model-binding"),mdxType:"UseCaseCard"})))}y.isMDXComponent=!0}}]);