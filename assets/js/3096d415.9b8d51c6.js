"use strict";(globalThis.webpackChunkvertigis_studio_dev_center=globalThis.webpackChunkvertigis_studio_dev_center||[]).push([[3992,2129],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var s=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,s,i=function(e,t){if(null==e)return{};var n,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=s.createContext({}),l=function(e){var t=s.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=l(e.components);return s.createElement(c.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return s.createElement(s.Fragment,{},t)}},v=s.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,c=e.parentName,p=a(e,["components","mdxType","originalType","parentName"]),u=l(n),v=i,m=u["".concat(c,".").concat(v)]||u[v]||d[v]||r;return n?s.createElement(m,o(o({ref:t},p),{},{components:n})):s.createElement(m,o({ref:t},p))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=v;var a={};for(var c in t)hasOwnProperty.call(t,c)&&(a[c]=t[c]);a.originalType=e,a[u]="string"==typeof e?e:i,o[1]=a;for(var l=2;l<r;l++)o[l]=n[l];return s.createElement.apply(null,o)}return s.createElement.apply(null,n)}v.displayName="MDXCreateElement"},6062:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>v,frontMatter:()=>o,metadata:()=>c,toc:()=>p});var s=n(7462),i=(n(7294),n(3905)),r=n(9704);const o={title:"Events Reference",description:"VertiGIS Studio Mobile - Events Reference"},a=void 0,c={unversionedId:"mobile/sdk-events-reference",id:"mobile/sdk-events-reference",title:"Events Reference",description:"VertiGIS Studio Mobile - Events Reference",source:"@site/docs/mobile/sdk-events-reference.mdx",sourceDirName:"mobile",slug:"/mobile/sdk-events-reference",permalink:"/docs/mobile/sdk-events-reference",draft:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/mobile/sdk-events-reference.mdx",tags:[],version:"current",frontMatter:{title:"Events Reference",description:"VertiGIS Studio Mobile - Events Reference"},sidebar:"mobile",previous:{title:"Overview",permalink:"/docs/mobile/sdk-events-overview"},next:{title:"Dependency Injection",permalink:"/docs/mobile/sdk-dependency-injection"}},l={},p=[{value:"Publishing Events",id:"publishing-events",level:2},{value:"Subscribing to Events",id:"subscribing-to-events",level:2},{value:"Creating Custom Events",id:"creating-custom-events",level:2},{value:"Event Arguments",id:"event-arguments",level:3}],u={toc:p},d="wrapper";function v(e){let{components:t,...n}=e;return(0,i.kt)(d,(0,s.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Events can be published, subscribed, or created by an custom service, component model, or component."),(0,i.kt)("h2",{id:"publishing-events"},"Publishing Events"),(0,i.kt)("p",null,"Events can be published by calling the ",(0,i.kt)("inlineCode",{parentName:"p"},".publish")," method on the event object."),(0,i.kt)("p",null,"In both components and services, event objects are accessed by injecting the relevant event reference class."),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"AllEvents")," class is a repository of all available events in the VertiGIS Studio Mobile SDK")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs"},"class CustomServiceOrComponent : ServiceBase\n{\n    private AllEvents _events;\n\n    private TaskEvents _taskEvents;\n\n    public CustomServiceOrComponent(AllEvents events, TaskEvents taskEvents)\n        : base()\n    {\n        _events = events;\n        _taskEvents = taskEvents;\n    }\n\n    public void PublishSomeEvent()\n    {\n        _taskEvents.Identified.Publish(someFeatures);\n        // _events.TaskEvents.Identified.Publish(someFeatures);\n    }\n}\n")),(0,i.kt)("h2",{id:"subscribing-to-events"},"Subscribing to Events"),(0,i.kt)("p",null,"Events can be subscribed to by calling the ",(0,i.kt)("inlineCode",{parentName:"p"},".subscribe")," method on the event object."),(0,i.kt)("p",null,"In both components and services, event objects are accessed by injecting the event reference class."),(0,i.kt)(r.default,{mdxType:"CleanupHandlesSnippet"}),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs"},"public class CustomServiceOrComponent : ServiceBase\n{\n    public CustomServiceOrComponent(UIEvents uiEvents)\n    {\n        // highlight-next-line\n        uiEvents.ComponentActivated.Subscribe(_onComponentActivated, this);\n    }\n\n    private void _onComponentActivated(string id)\n    {\n        // ... do something on component activation\n    }\n}\n")),(0,i.kt)("h2",{id:"creating-custom-events"},"Creating Custom Events"),(0,i.kt)("p",null,"Custom events in VertiGIS Studio Mobile are created through the ",(0,i.kt)("inlineCode",{parentName:"p"},"IEventRegistry"),". Events can be directly created in any component or service that can inject this class, but it is best practice to define events in a class that extends ",(0,i.kt)("inlineCode",{parentName:"p"},"EventsBase")," and registers with Autofac. This allows your events to be injected and referenced by any component or service across the app."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs"},'// highlight-next-line\n[assembly: Export(typeof(CustomEvents), SingleInstance = true, AsImplementedInterfaces = false, AsSelf = true, PropertiesAutowired = true)]\nnamespace App1.Events\n{\n    public class CustomEvents : EventsBase\n    {\n        // highlight-next-line\n        public IEvent SomeEvent => GetEvent("custom.some-event");\n\n        public CustomEvents(IEventRegistry eventRegistry)\n            : base(eventRegistry)\n        {\n        }\n    }\n}\n')),(0,i.kt)("h3",{id:"event-arguments"},"Event Arguments"),(0,i.kt)("p",null,"Events optionally take a type argument, which represents the object associated with the event consumed by the subscriber. This can be a simple or complex object."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs"},'public class CustomEvents : EventsBase\n{\n    // highlight-start\n    public IEvent EventWithNoArg => GetEvent("custom.no-arg");\n\n    public IEvent<string> EventWithSimpleArg => GetEvent<string>("custom.simple-arg");\n\n    public IEvent<YourCustomType> EventWithComplexArg => GetEvent("custom.complex-arg");\n    // highlight-end\n\n    public CustomEvents(IEventRegistry eventRegistry)\n        : base(eventRegistry)\n    {\n    }\n}\n')))}v.isMDXComponent=!0},9704:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var s=n(7462),i=(n(7294),n(3905));const r={},o=void 0,a={unversionedId:"mobile/snippets/cleanup-handles",id:"mobile/snippets/cleanup-handles",title:"cleanup-handles",description:"It is vital that subscription handles are cleaned up when the object is cleaned up, otherwise dangling references can occur. This can be done by implementing the IDisposable and IDisposableTracker interface, and then providing this as the second argument to a call to subscribe. ServiceBase and ComponentBase already implement these interfaces so you don't have to.",source:"@site/docs/mobile/snippets/cleanup-handles.mdx",sourceDirName:"mobile/snippets",slug:"/mobile/snippets/cleanup-handles",permalink:"/docs/mobile/snippets/cleanup-handles",draft:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/mobile/snippets/cleanup-handles.mdx",tags:[],version:"current",frontMatter:{}},c={},l=[],p={toc:l},u="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(u,(0,s.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("admonition",{title:"Important",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"It is vital that subscription handles are cleaned up when the object is cleaned up, otherwise dangling references can occur. This can be done by implementing the ",(0,i.kt)("inlineCode",{parentName:"p"},"IDisposable")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"IDisposableTracker")," interface, and then providing ",(0,i.kt)("inlineCode",{parentName:"p"},"this")," as the second argument to a call to subscribe. ",(0,i.kt)("inlineCode",{parentName:"p"},"ServiceBase")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"ComponentBase")," already implement these interfaces so you don't have to.")))}d.isMDXComponent=!0}}]);